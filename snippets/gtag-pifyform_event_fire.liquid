<script defer>
    (function () {
        const formIdToEventMapping = new Map([
            [11262, "B2C_testride_application"],
            [11281, "B2C_testride_application"],
            [11282, "B2C_testride_application"],

            [10826, "B2B_dealer_application"],
            [10998, "B2B_dealer_application"],
            [10998, "B2B_dealer_application"],

            [6679, "B2B_Jobrad_application"],
            [11242, "B2B_Jobrad_application"],
            [11243, "B2B_Jobrad_application"],

            [11179, "B2B_dienstrad_application"],
            [11182, "B2B_dienstrad_application"],

            [11553, "B2B_Bikeleasing_application"], // /pages/save-with-bikeleasing

            [11292, "test_pifyform_submitted"], // test form
        ]);
        window.addEventListener('message', evt => {
            if (evt.origin === "https://form-builder-an.pifyapp.com" && (typeof evt.data === 'string' && evt.data.includes("SubmittedFormId"))) {
                const formId = JSON.parse(evt.data).SubmittedFormId;
                const eventName = formIdToEventMapping.get(formId);
                if (eventName) {
                    [
                        () => gtag('event', eventName),
                        () => fbq('trackCustom', eventName)
                    ].forEach(trackFn => {
                        try {
                            trackFn();
                        } catch (e) {
                            console.error(e)
                        }
                    });
                } else {
                    console.warn("no event name was found for form " + formId);
                }
            }
        });
    })();
</script>