{% assign current_locale = request.locale.iso_code | default: 'en' %}
{% assign locale_prefix = current_locale | slice: 0, 2 %}

{% if section.settings.show_media_column %}
  <div class="column column--media media-column {% if section.settings.media_position_setting == 'right' %}column--order-push-desktop{% endif %}">
    <div class="background-container">
      {% if section.settings.media_bg_video != blank %}
        <video class="background-video" autoplay muted loop playsinline>
          <source src="{{ section.settings.media_bg_video }}" type="video/mp4">
        </video>
      {% endif %}

      <div
        class="media-overlap__background"
        style="background-color: {{ section.settings.media_bg_color }};{% if section.settings.media_bg_image != blank %}background-image: url('{{ section.settings.media_bg_image | img_url: '2000x' }}');{% endif %}background-position: {{ section.settings.media_position | replace: '-', ' ' }};background-size: {{ section.settings.media_size }};"
      ></div>
    </div>

    <div 
      class="media-text-wrapper text-align media-align-{{ section.settings.media_content_alignment }} media-valign-{{ section.settings.media_content_vertical_alignment }}" 
      data-cc-animate
      style="{% if section.settings.media_text_bg_color != blank %}background-color: {{ section.settings.media_text_bg_color }};{% endif %}{% if section.settings.media_text_bg_opacity != blank %}opacity: {{ section.settings.media_text_bg_opacity | divided_by: 100.0 }};{% endif %}"
    >
      {% if section.settings.media_heading != blank %}
        {% capture media_heading %}
          {% case locale_prefix %}
            {% when 'de' %}{{ section.settings.media_heading_de | default: section.settings.media_heading }}
            {% when 'fr' %}{{ section.settings.media_heading_fr | default: section.settings.media_heading }}
            {% when 'fi' %}{{ section.settings.media_heading_fi | default: section.settings.media_heading }}
            {% else %}{{ section.settings.media_heading }}
          {% endcase %}
        {% endcapture %}

        {% if section.settings.media_use_h1 %}
          <h1 class="majortitle in-content" data-format-number>{{ media_heading | escape }}</h1>
        {% else %}
          <h2 class="majortitle in-content h1" data-format-number>{{ media_heading | escape }}</h2>
        {% endif %}
      {% endif %}

      {% if section.settings.media_text != blank %}
        {% capture media_text %}
          {% case locale_prefix %}
            {% when 'de' %}{{ section.settings.media_text_de | default: section.settings.media_text }}
            {% when 'fr' %}{{ section.settings.media_text_fr | default: section.settings.media_text }}
            {% when 'fi' %}{{ section.settings.media_text_fi | default: section.settings.media_text }}
            {% else %}{{ section.settings.media_text }}
          {% endcase %}
        {% endcapture %}
        
        {% assign media_font_family_style = '' %}
        {% if section.settings.media_text_font_family == 'sans-serif' %}
          {% assign media_font_family_style = 'font-family: Helvetica, "Helvetica Neue", Arial, "Lucida Grande", sans-serif;' %}
        {% else %}
          {% assign media_font_family_style = 'font-family: "SF Mono", Menlo, Consolas, Monaco, "Liberation Mono", "Lucida Console", monospace, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";' %}
        {% endif %}
        
        <div
          class="rte {% if section.settings.media_enlarge_text %}large-text{% endif %}"
          style="{% if section.settings.media_text_bg_enabled %}background-color: rgba(0, 0, 0, 0.5); padding: 20px;{% else %}padding: 15px;{% endif %}{{ media_font_family_style }}"
        >
          {{ media_text }}
        </div>
      {% endif %}

      <div class="button-container">
        {% if section.settings.media_button1_label != blank and section.settings.media_button1_link != blank %}
          {% capture media_button1_label %}
            {% case locale_prefix %}
              {% when 'de' %}{{ section.settings.media_button1_label_de | default: section.settings.media_button1_label }}
              {% when 'fr' %}{{ section.settings.media_button1_label_fr | default: section.settings.media_button1_label }}
              {% when 'fi' %}{{ section.settings.media_button1_label_fi | default: section.settings.media_button1_label }}
              {% else %}{{ section.settings.media_button1_label }}
            {% endcase %}
          {% endcapture %}
          <a
            class="btn btn--primary button-row__btn btn-1 modern-media-button"
            href="{{ section.settings.media_button1_link }}"
            style="
              display: inline-flex;
              align-items: center;
              justify-content: center;
              font-weight: 300;
              font-size: 16px;
              letter-spacing: 0.025em;
              padding: 0 24px;
              height: 48px;
              border-radius: 50px;
              position: relative;
              overflow: hidden;
              cursor: pointer;
              transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
              box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06);
              text-decoration: none;
            "
          >
            <span class="button-text" style="transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1); z-index: 2; position: relative;">
              {{- media_button1_label -}}
            </span>
            <svg class="button-arrow" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-left: 8px; transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1); z-index: 2; position: relative;">
              <path d="M6 3L11 8L6 13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <div class="button-shine" style="
              position: absolute;
              top: 0;
              left: -100%;
              width: 100%;
              height: 100%;
              background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
              transition: left 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            "></div>
          </a>
        {% endif %}

        {% if section.settings.media_button2_label != blank and section.settings.media_button2_link != blank %}
          {% capture media_button2_label %}
            {% case locale_prefix %}
              {% when 'de' %}{{ section.settings.media_button2_label_de | default: section.settings.media_button2_label }}
              {% when 'fr' %}{{ section.settings.media_button2_label_fr | default: section.settings.media_button2_label }}
              {% when 'fi' %}{{ section.settings.media_button2_label_fi | default: section.settings.media_button2_label }}
              {% else %}{{ section.settings.media_button2_label }}
            {% endcase %}
          {% endcapture %}
          <a
            class="btn btn--secondary button-row__btn btn-2 modern-media-button"
            href="{{ section.settings.media_button2_link }}"
            style="
              display: inline-flex;
              align-items: center;
              justify-content: center;
              font-weight: 300;
              font-size: 16px;
              letter-spacing: 0.025em;
              padding: 0 24px;
              height: 48px;
              border-radius: 50px;
              position: relative;
              overflow: hidden;
              cursor: pointer;
              transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
              box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06);
              text-decoration: none;
            "
          >
            <span class="button-text" style="transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1); z-index: 2; position: relative;">
              {{- media_button2_label -}}
            </span>
            <svg class="button-arrow" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-left: 8px; transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1); z-index: 2; position: relative;">
              <path d="M6 3L11 8L6 13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <div class="button-shine" style="
              position: absolute;
              top: 0;
              left: -100%;
              width: 100%;
              height: 100%;
              background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
              transition: left 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            "></div>
          </a>
        {% endif %}
      </div>
    </div>
  </div>
{% endif %}

<style>
  .modern-media-button {
    position: relative;
    transform-style: preserve-3d;
    backface-visibility: hidden;
  }
  
  .modern-media-button::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    border-radius: inherit;
    background: linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05));
    opacity: 0;
    transition: opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    pointer-events: none;
  }
  
  .modern-media-button:hover {
    transform: translateY(-2px) scale(1.02) !important;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15), 0 4px 10px rgba(0, 0, 0, 0.1) !important;
  }
  
  .modern-media-button:hover::before {
    opacity: 1;
  }
  
  .modern-media-button:hover .button-text {
    transform: translateX(-2px);
  }
  
  .modern-media-button:hover .button-arrow {
    transform: translateX(4px) scale(1.1);
  }
  
  .modern-media-button:hover .button-shine {
    left: 100%;
  }
  
  .modern-media-button:active {
    transform: translateY(0) scale(0.98) !important;
    transition: transform 0.1s cubic-bezier(0.4, 0, 0.2, 1) !important;
  }
  
  .modern-media-button:focus {
    outline: none;
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3) !important;
  }
</style>