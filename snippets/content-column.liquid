<div class="column column--content align-{{ section.settings.content_alignment }} valign-{{ section.settings.content_vertical_alignment | default: 'center' }}" data-cc-animate>
  {% if section.settings.content_bg_video != blank %}
    <video
      class="background-video"
      autoplay
      muted
      loop
      playsinline
    >
      <source src="{{ section.settings.content_bg_video }}" type="video/mp4">
    </video>
  {% endif %}
  <div class="background-container">
    {% if section.settings.content_bg_image != blank %}
      <div class="background-image-desktop" style="background-image: url('{{ section.settings.content_bg_image | img_url: '2000x' }}'); background-position: {{ section.settings.content_bg_position | default: 'center center' }}; background-size: {{ section.settings.content_bg_size | default: 'cover' }}; background-repeat: no-repeat; position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 0;"></div>
    {% endif %}
    {% if section.settings.content_mobile_bg != blank %}
      <div class="background-image-mobile" style="background-image: url('{{ section.settings.content_mobile_bg | img_url: '1200x' }}'); background-position: {{ section.settings.content_mobile_bg_position | default: 'center center' }}; background-size: {{ section.settings.content_mobile_bg_size | default: 'cover' }}; background-repeat: no-repeat; position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 0; display: none;"></div>
    {% endif %}
  </div>

  <div 
    class="text-content-wrapper" 
    style="position: relative; display: flex; flex-direction: column; height: 100%;{% if section.settings.content_text_bg_color != blank %}background-color: {{ section.settings.content_text_bg_color }};{% endif %}{% if section.settings.content_text_bg_opacity != blank %}opacity: {{ section.settings.content_text_bg_opacity | divided_by: 100.0 }};{% endif %}"
  >
    {% for block in section.blocks %}
      <div class="block-{{ block.id }}" {% if block.type == 'custom_image' %}style="display: flex; justify-content: {{ block.settings.alignment }};"{% endif %} {{ block.shopify_attributes }}>
        {% case block.type %}
          {% when 'heading' %}
            {% render 'block-heading', block: block %}

          {% when 'text' %}
            {% render 'block-text', block: block %}

          {% when 'liquid_content' %}
            <div class="custom-liquid-block">
              {{ block.settings.liquid_content }}
            </div>

          {% when 'newsletter' %}
            {% render 'block-newsletter', block: block %}

          {% when 'button' %}
            {% render 'block-button', block: block %}

          {% when 'bike_tab' %}
            {% render 'block-bike-tab', block: block %}

          {%- when 'feature_column' -%}
            {% render 'block-feature-column', block: block %}

          {%- when 'slide_footer' -%}
            {% render 'block-slide-footer', block: block %}

          {% when 'countdown' %}
            {% render 'block-countdown', block: block %}

          {% when 'discount-label' %}
            {% render 'discount-label', block: block %}
            
          {% when 'custom_image' %}
            {% render 'block-custom-image', block: block %}
          
          {% when '@app' %}
            {% render block %}
        {% endcase %}
      </div>
    {% endfor %}
  </div>
</div>
