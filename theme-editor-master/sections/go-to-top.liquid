{%- comment -%}
/**
 * Go to Top Section - Scroll-to-Top Button Component
 * 
 * CORE FUNCTIONALITY:
 * - Fixed position floating button that appears when user scrolls down
 * - Smooth scroll animation back to top of page when clicked
 * - Auto-hide/show based on scroll position threshold
 * - Responsive design with hover and active state animations
 * - Accessibility support with proper ARIA labels
 * 
 * TECHNICAL IMPLEMENTATION:
 * - Pure CSS and vanilla JavaScript implementation
 * - No external dependencies or framework requirements
 * - Uses CSS custom properties (variables) for easy customization
 * - Throttled scroll event handling for performance optimization
 * - Smooth scrolling behavior using native browser API
 * 
 * SHOPIFY INTEGRATION:
 * - Standalone section that can be added to any template
 * - No Shopify-specific dependencies or liquid logic
 * - Compatible with all Shopify themes and templates
 * - Can be easily customized through theme settings
 * 
 * RELATED FILES:
 * - No external file dependencies
 * - Self-contained component with inline styles and scripts
 * 
 * LAYOUT OPTIONS:
 * - Fixed positioning in bottom-right corner
 * - Circular button design with centered arrow icon
 * - Customizable size, colors, and positioning via CSS variables
 * 
 * RESPONSIVE DESIGN:
 * - Works on all device sizes and screen resolutions
 * - Touch-friendly button size for mobile devices
 * - Consistent behavior across different browsers
 * - Optimized for both desktop and mobile interactions
 * 
 * ACCESSIBILITY FEATURES:
 * - ARIA label for screen reader compatibility
 * - Keyboard navigation support
 * - High contrast design for visibility
 * - Semantic button element for proper interaction
 * 
 * CUSTOMIZATION OPTIONS:
 * - Background color (--bg-color CSS variable)
 * - Icon color (--icon-color CSS variable)
 * - Button size (--size CSS variable)
 * - Position adjustable via CSS
 * - Scroll threshold configurable in JavaScript
 * 
 * ANIMATION FEATURES:
 * - Fade in/out transition when showing/hiding
 * - Scale animation on hover and active states
 * - Smooth transform transitions for visual feedback
 * - Box shadow effects for depth perception
 * 
 * PERFORMANCE CONSIDERATIONS:
 * - Throttled scroll event listener (50ms delay)
 * - Efficient DOM manipulation with classList toggle
 * - Minimal JavaScript footprint
 * - CSS transitions for hardware-accelerated animations
 * 
 * BROWSER COMPATIBILITY:
 * - Modern browser support with CSS custom properties
 * - Fallback-friendly design for older browsers
 * - Cross-browser scroll behavior support
 * - Standard web APIs for maximum compatibility
 * 
 * USE CASES:
 * - Long-form content pages (blogs, articles)
 * - Product listing pages with extensive content
 * - Any page where users need quick navigation to top
 * - Improving user experience on mobile devices
 * 
 * CONFIGURATION:
 * - Scroll threshold: 100px (configurable in JavaScript)
 * - Button size: 50px (configurable via CSS variable)
 * - Position: bottom-right corner (adjustable via CSS)
 * - Animation duration: 0.3s for opacity, 0.2s for transform
 */
{%- endcomment -%}

{% schema %}
{
  "name": "Go to top",
  "settings": [],
  "presets": [
    {
      "name": "Go to top",
      "category": "Custom"
    }
  ]
}
{% endschema %}

<style>
  .scroll-to-top {
    --bg-color: #000;
    --icon-color: #fff;
    --size: 50px;

    position: fixed;
    bottom: 80px;
    right: 50px;
    background-color: var(--bg-color);
    color: var(--icon-color);
    border: none;
    border-radius: 50%;
    width: var(--size);
    height: var(--size);
    cursor: pointer;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s ease, transform 0.2s ease, visibility 0.3s;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
    transform: scale(0.95);
  }

  .scroll-to-top.show {
    opacity: 1;
    visibility: visible;
    transform: scale(1);
  }

  .scroll-to-top:hover {
    transform: scale(1.05);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);
  }

  .scroll-to-top:active {
    transform: scale(0.98);
  }

  .scroll-to-top svg {
    width: 40%;
    height: auto;
  }
</style>

<button
  class="scroll-to-top"
  id="scrollToTopBtn"
  aria-label="Scroll to top"
>
  <svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
    <polygon fill="currentColor" points="390.624 150.625 256 16 121.376 150.625 144.004 173.252 240.001 77.254 240.001 495.236 272.001 495.236 272.001 77.257 367.996 173.252 390.624 150.625"/>
  </svg>
</button>

<script>
  (function () {
    const scrollBtn = document.getElementById('scrollToTopBtn');
    let scrollTimeout = null;

    function handleScroll() {
      clearTimeout(scrollTimeout);
      scrollTimeout = setTimeout(() => {
        const scrollThreshold = 100;
        const scrollPosition = Math.max(document.body.scrollTop, document.documentElement.scrollTop);

        scrollBtn.classList.toggle('show', scrollPosition > scrollThreshold);
      }, 50);
    }

    scrollBtn.addEventListener('click', () => {
      window.scrollTo({
        top: 0,
        behavior: 'smooth',
      });
    });

    window.addEventListener('scroll', handleScroll);

    handleScroll();
  })();
</script>
