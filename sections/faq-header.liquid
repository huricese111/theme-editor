{%- assign locale_code = request.locale.iso_code -%}
{%- assign lang_map = 'de,fr,fi' | split: ',' -%}
{%- assign lang_suffix = '' -%}
{%- if lang_map contains locale_code -%}
  {%- assign lang_suffix = '_' | append: locale_code -%}
{%- endif -%}

<script src="{{ 'faq-header.js' | asset_url }}" defer></script>
<div class="container" {%- render 'animation-attrs', attrs: 'data-cc-animate' -%}>
  <faq-header class="faq-header block">
    {% if section.settings.show_index %}
      <div class="faq-index js">
        <div class="faq-index__sticky-container">
          <div class="faq-index__item-container">
            {% if section.settings.index_heading != blank %}
              <div class="faq-index__heading">{{ section.settings.index_heading }}</div>
            {% endif %}
          </div>
        </div>
      </div>
    {% endif %}

    <div class="faq-header__content">
      {% if section.settings.title != blank %}
        {%- assign title_field = 'title' | append: lang_suffix -%}
        {%- assign title_value = section.settings[title_field] -%}
        {% if section.settings.use_h1 %}
          <h1 id="{{ section.id }}">
            {%- if title_value != blank -%}
              {{ title_value | escape }}
            {%- else -%}
              {{ section.settings.title | escape }}
            {%- endif -%}
          </h1>
        {% else %}
          <h2 id="{{ section.id }}" class="h1">
            {%- if title_value != blank -%}
              {{ title_value | escape }}
            {%- else -%}
              {{ section.settings.title | escape }}
            {%- endif -%}
          </h2>
        {% endif %}
      {% endif %}

      {% if section.settings.text != blank %}
        <div class="rte">{{ section.settings.text }}</div>
      {% endif %}

      {% if section.settings.show_search %}
        <div class="faq-search js">
          <span class="faq-search__icon">{% render 'icon-search' %}</span>
          <input type="text" class="faq-search__input" autocomplete="off" placeholder="{{ 'sections.faq_header.search_placeholder' | t | escape }}" aria-label="{{ 'sections.faq_header.search_label' | t | escape }}">
        </div>
      {% endif %}
    </div>
  </faq-header>
</div>


{% schema %}
{
  "name": "FAQ header",
  "class": "section-faq-header",
  "disabled_on": {
    "groups": [
      "aside"
    ]
  },
  "settings": [
    {
      "type": "paragraph",
      "content": "Place this section above Collapsible tab sections to provide quick links and search. You may use multiple Collapsible tabs."
    },
    {
      "type": "text",
      "id": "title",
      "label": "Title (Default)",
      "default": "FAQ"
    },
    {
      "type": "text",
      "id": "title_de",
      "label": "Title German",
      "default": "FAQ"
    },
    {
      "type": "text",
      "id": "title_fr",
      "label": "Title French",
      "default": "FAQ"
    },
    {
      "type": "text",
      "id": "title_fi",
      "label": "Title Finnish",
      "default": "FAQ"
    },
    {
      "type": "checkbox",
      "id": "use_h1",
      "label": "Set as primary page heading",
      "info": "Uses <h1> tag (used for SEO and accessibility). One per page recommended.",
      "default": false
    },
    {
      "type": "richtext",
      "id": "text",
      "label": "Description"
    },
    {
      "type": "checkbox",
      "id": "show_search",
      "label": "Show search",
      "default": true
    },
    {
      "type": "header",
      "content": "Index column"
    },
    {
      "type": "checkbox",
      "id": "show_index",
      "label": "Show index column",
      "default": true
    },
    {
      "type": "text",
      "id": "index_heading",
      "label": "Heading",
      "default": "How can we help?"
    }
  ],
  "presets": [
    {
      "name": "FAQ header",
      "settings": {
      }
    }
  ]
}
{% endschema %}
