{% schema %}
{
    "name": "Collapsible Panels",
    "settings": [
        {
            "type": "text",
            "id": "title",
            "label": "Title",
            "default":"FAQ"
        },
        {
            "type": "text",
            "id": "title_de",
            "label": "Title DE",
            "default":"FAQ"
        },
        {
            "type": "text",
            "id": "title_fr",
            "label": "Title FR",
            "default":"FAQ"
        },
        {
            "type": "text",
            "id": "title_fi",
            "label": "Title FI",
            "default":"FAQ"
        },
    ],
    "blocks": [
        {
            "type": "panel",
            "name": "Panel",
            "settings": [
                {
                    "type": "text",
                    "id": "title",
                    "label": "Panel Title"
                },
                {
                    "type": "text",
                    "id": "title_de",
                    "label": "Panel Title DE"
                },
                {
                    "type": "text",
                    "id": "title_fr",
                    "label": "Panel Title FR"
                },
                 {
                    "type": "text",
                    "id": "title_fi",
                    "label": "Panel Title FI"
                },
                {
                    "type": "richtext",
                    "id": "content_1",
                    "label": "Panel Content 1"
                },
                {
                    "type": "richtext",
                    "id": "content_1_de",
                    "label": "Panel Content 1 DE"
                },
                {
                    "type": "richtext",
                    "id": "content_1_fr",
                    "label": "Panel Content 1 FR"
                },
                 {
                    "type": "richtext",
                    "id": "content_1_fi",
                    "label": "Panel Content 1 FI"
                },
                {
                    "type": "image_picker",
                    "id": "image_1",
                    "label": "Panel Image 1"
                },
                {
                    "type": "richtext",
                    "id": "content_2",
                    "label": "Panel Content 2"
                },
                {
                    "type": "richtext",
                    "id": "content_2_de",
                    "label": "Panel Content 2 DE"
                },
                {
                    "type": "richtext",
                    "id": "content_2_fr",
                    "label": "Panel Content 2 FR"
                },
                 {
                    "type": "richtext",
                    "id": "content_2_fi",
                    "label": "Panel Content 2 FI"
                },
                {
                    "type": "image_picker",
                    "id": "image_2",
                    "label": "Panel Image 2"
                },
                {
                    "type": "richtext",
                    "id": "content_3",
                    "label": "Panel Content 3"
                },
                {
                    "type": "richtext",
                    "id": "content_3_de",
                    "label": "Panel Content 3 DE"
                },
                {
                    "type": "richtext",
                    "id": "content_3_fr",
                    "label": "Panel Content 3 FR"
                },
                {
                    "type": "richtext",
                    "id": "content_3_fi",
                    "label": "Panel Content 3 FI"
                },
                {
                    "type": "image_picker",
                    "id": "image_3",
                    "label": "Panel Image 3"
                },
                {
                    "type": "richtext",
                    "id": "content_4",
                    "label": "Panel Content 4"
                },
                {
                    "type": "richtext",
                    "id": "content_4_de",
                    "label": "Panel Content 4 DE"
                },
                {
                    "type": "richtext",
                    "id": "content_4_fr",
                    "label": "Panel Content 4 FR"
                },
                 {
                    "type": "richtext",
                    "id": "content_4_fi",
                    "label": "Panel Content 4 FI"
                },
                {
                    "type": "image_picker",
                    "id": "image_4",
                    "label": "Panel Image 4"
                },
                {
                    "type": "richtext",
                    "id": "content_5",
                    "label": "Panel Content 5"
                },
                {
                    "type": "richtext",
                    "id": "content_5_de",
                    "label": "Panel Content 5 DE"
                },
                {
                    "type": "richtext",
                    "id": "content_5_fr",
                    "label": "Panel Content 5 FR"
                },
                 {
                    "type": "richtext",
                    "id": "content_5_fi",
                    "label": "Panel Content 5 FI"
                },
                {
                    "type": "image_picker",
                    "id": "image_5",
                    "label": "Panel Image 5"
                },
                {
                    "type": "richtext",
                    "id": "content_6",
                    "label": "Panel Content 6"
                },
                {
                    "type": "richtext",
                    "id": "content_6_de",
                    "label": "Panel Content 6 DE"
                },
                {
                    "type": "richtext",
                    "id": "content_6_fr",
                    "label": "Panel Content 6 FR"
                },
                  {
                    "type": "richtext",
                    "id": "content_6_fi",
                    "label": "Panel Content 6 FI"
                },
                {
                    "type": "image_picker",
                    "id": "image_6",
                    "label": "Panel Image 6"
                }
            ]
        }
    ],
    "presets": [
        {
            "name": "Custom Collapsible Panels",
            "category": "Custom"
        }
    ]
}
{% endschema %}

<div class="custom-tab-container">
    <h2 class="iconrow-title" data-localize="{{ section.settings.title }}">
        {% if request.locale.iso_code == 'de' %}
                    {{ section.settings.title_de }}
                {% elsif request.locale.iso_code == 'fr' %}
                    {{ section.settings.title_fr }}
                 {% elsif request.locale.iso_code == 'fi' %}
                    {{ section.settings.title_fi }}
                {% else %}
                    {{ section.settings.title }}
                {% endif %}
    </h2>
    {% for block in section.blocks %}
    <div class="custom-panel">
        <div class="custom-panel-header" onclick="togglePanel(this)">
            {% if request.locale.iso_code == 'de' %}
                {{ block.settings.title_de }}
            {% elsif request.locale.iso_code == 'fr' %}
                {{ block.settings.title_fr }}
            {% elsif request.locale.iso_code == 'fi' %}
                {{ block.settings.title_fi }}
            {% else %}
                {{ block.settings.title }}
            {% endif %}
            <svg class="custom-arrow-plus" fill="#000000" xmlns="http://www.w3.org/2000/svg" width="30px" height="30px" viewBox="0 0 100 100">
   <line x1="50" y1="10" x2="50" y2="90" stroke="black" stroke-width="4" />
  <line x1="10" y1="50" x2="90" y2="50" stroke="black" stroke-width="4" />
</svg>
        </div>
        <div class="custom-panel-content">
            <div class="custom-panel-text">
                {% if request.locale.iso_code == 'de' %}
                    {{ block.settings.content_1_de }}
                {% elsif request.locale.iso_code == 'fr' %}
                    {{ block.settings.content_1_fr }}
                 {% elsif request.locale.iso_code == 'fi' %}
                    {{ block.settings.content_1_fi }}
                {% else %}
                    {{ block.settings.content_1 }}
                {% endif %}
            </div>
            {% if block.settings.image_1 %}
                <img src="{{ block.settings.image_1 | img_url: 'original' }}" alt="{{ block.settings.title }}" class="contentimg"/>
            {% endif %}
            <div class="custom-panel-text">
                {% if request.locale.iso_code == 'de' %}
                    {{ block.settings.content_2_de }}
                {% elsif request.locale.iso_code == 'fr' %}
                    {{ block.settings.content_2_fr }}
                {% elsif request.locale.iso_code == 'fi' %}
                    {{ block.settings.content_2_fi }}
                {% else %}
                    {{ block.settings.content_2 }}
                {% endif %}
            </div>
            {% if block.settings.image_2 %}
                <img src="{{ block.settings.image_2 | img_url: 'original' }}" alt="{{ block.settings.title }}" class="contentimg"/>
            {% endif %}
            <div class="custom-panel-text">
                {% if request.locale.iso_code == 'de' %}
                    {{ block.settings.content_3_de }}
                {% elsif request.locale.iso_code == 'fr' %}
                    {{ block.settings.content_3_fr }}
                 {% elsif request.locale.iso_code == 'fi' %}
                    {{ block.settings.content_3_fi }}
                {% else %}
                    {{ block.settings.content_3 }}
                {% endif %}
            </div>
            {% if block.settings.image_3 %}
                <img src="{{ block.settings.image_3 | img_url: 'original' }}" alt="{{ block.settings.title }}" class="contentimg"/>
            {% endif %}
            <div class="custom-panel-text">
                {% if request.locale.iso_code == 'de' %}
                    {{ block.settings.content_4_de }}
                {% elsif request.locale.iso_code == 'fr' %}
                    {{ block.settings.content_4_fr }}
                  {% elsif request.locale.iso_code == 'fi' %}
                    {{ block.settings.content_4_fi }}
                {% else %}
                    {{ block.settings.content_4 }}
                {% endif %}
            </div>
            {% if block.settings.image_4 %}
                <img src="{{ block.settings.image_4 | img_url: 'original' }}" alt="{{ block.settings.title }}" class="contentimg"/>
            {% endif %}
            <div class="custom-panel-text">
                {% if request.locale.iso_code == 'de' %}
                    {{ block.settings.content_5_de }}
                {% elsif request.locale.iso_code == 'fr' %}
                    {{ block.settings.content_5_fr }}
                {% elsif request.locale.iso_code == 'fi' %}
                    {{ block.settings.content_5_fi }}
                {% else %}
                    {{ block.settings.content_5 }}
                {% endif %}
            </div>
            {% if block.settings.image_5 %}
                <img src="{{ block.settings.image_5 | img_url: 'original' }}" alt="{{ block.settings.title }}" class="contentimg"/>
            {% endif %}
            <div class="custom-panel-text">
                {% if request.locale.iso_code == 'de' %}
                    {{ block.settings.content_6_de }}
                {% elsif request.locale.iso_code == 'fr' %}
                    {{ block.settings.content_6_fr }}
                {% elsif request.locale.iso_code == 'fi' %}
                    {{ block.settings.content_6_fi }}
                {% else %}
                    {{ block.settings.content_6 }}
                {% endif %}
            </div>
            {% if block.settings.image_6 %}
                <img src="{{ block.settings.image_6 | img_url: 'original' }}" alt="{{ block.settings.title }}" class="contentimg"/>
            {% endif %}
        </div>
    </div>
    {% endfor %}
</div>

<script>
    function togglePanel(header) {
        const content = header.nextElementSibling;
        const arrow = header.querySelector('.custom-arrow-plus');

        if (content.style.display === "block") {
            content.style.display = "none";
            header.classList.remove('expanded');
        } else {
            content.style.display = "block";
            header.classList.add('expanded');
        }
    }
</script>

<style>
    .iconrow-title {
        font-size: 30px;
        margin-bottom: 40px;
        text-align: center;
    }

    .custom-tab-container {
        max-width: 1200px;
        margin: 0 auto 60px;
        padding: 20px;
    }
    .custom-panel {
        background-color: white;
        margin: 10px 0;
        border-bottom: 1px solid #ddd;
    }
    .custom-panel-header {
        padding: 10px;
        cursor: pointer;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-weight: bold;
        font-size: 18px;
    }
    .custom-panel-content {
        display: none;
        padding: 10px;
        font-size: 16px;
    }

    .custom-panel-text a {
        text-decoration: underline;
        color: #1890ff;
    }

    .custom-arrow-plus {
        width: 14px;
        height: 14px;
        transition: transform 0.3s;
    }
    .expanded .custom-arrow-plus {
        transform: rotate(90deg);
    }

    @media (max-width: 768px) {
        .contentimg {
            width: 100%;
            height: auto; 
            max-width: 100%; 
        }
    }
</style>
