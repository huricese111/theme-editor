{% schema %}
{
  "name": "Custom Image with Text",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Heading (Default)",
      "default": "Highlights"
    },
    {
      "type": "text",
      "id": "title_de",
      "label": "Heading (German)",
      "default": "Highlights"
    },
    {
      "type": "text",
      "id": "title_fr",
      "label": "Heading (French)",
      "default": "Highlights"
    },
    {
      "type": "text",
      "id": "title_fi",
      "label": "Heading (Finnish)",
      "default": "Highlights"
    },
    {
      "type": "header",
      "content": "Visibility Settings"
    },
    {
      "type": "checkbox",
      "id": "hide_title",
      "label": "Hide Section Title",
      "default": false
    },
    {
      "type": "select",
      "id": "image_aspect_ratio",
      "label": "Image Aspect Ratio",
      "options": [
        {
          "value": "16/9",
          "label": "16:9"
        },
        {
          "value": "3/4",
          "label": "Portrait (3:4)"
        },
        {
          "value": "1/1",
          "label": "Square (1:1)"
        }
      ],
      "default": "16/9"
    },
    {
      "type": "header",
      "content": "Content Visibility"
    },
    {
      "type": "checkbox",
      "id": "show_title_global",
      "label": "Show Titles",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_text_global",
      "label": "Show Descriptions",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_button_global",
      "label": "Show Buttons",
      "default": true
    },
    {
      "type": "header",
      "content": "Button Settings"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button Text (Default)",
      "default": "Learn More"
    },
    {
      "type": "text",
      "id": "button_text_de",
      "label": "Button Text (German)",
      "default": "Mehr erfahren"
    },
    {
      "type": "text",
      "id": "button_text_fr",
      "label": "Button Text (French)",
      "default": "En savoir plus"
    },
    {
      "type": "text",
      "id": "button_text_fi",
      "label": "Button Text (Finnish)",
      "default": "Lue lisää"
    },
    {
      "type": "color",
      "id": "button_background_color",
      "label": "Button Background Color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "button_text_color",
      "label": "Button Text Color",
      "default": "#222222"
    },
    {
      "type": "color",
      "id": "button_border_color",
      "label": "Button Border Color",
      "default": "#222222"
    },
    {
      "type": "color",
      "id": "button_hover_background_color",
      "label": "Hover Background Color",
      "default": "#222222"
    },
    {
      "type": "color",
      "id": "button_hover_text_color",
      "label": "Hover Text Color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "button_hover_border_color",
      "label": "Hover Border Color",
      "default": "#222222"
    }
  ],
  "blocks": [
    {
      "type": "custom_item",
      "name": "Custom Item",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "url",
          "id": "image_link",
          "label": "Image Link (Optional)"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Title (Default)",
          "default": "Slide Title"
        },
        {
          "type": "text",
          "id": "title_de",
          "label": "Title (German)",
          "default": "Folientitel"
        },
        {
          "type": "text",
          "id": "title_fr",
          "label": "Title (French)",
          "default": "Titre de la diapositive"
        },
        {
          "type": "text",
          "id": "title_fi",
          "label": "Title (Finnish)",
          "default": "Dian otsikko"
        },
        {
          "type": "url",
          "id": "title_link",
          "label": "Title Link (Optional)"
        },
        {
          "type": "richtext",
          "id": "text",
          "label": "Text (Default)",
          "default": "<p>Add your custom text here</p>"
        },
        {
          "type": "richtext",
          "id": "text_de",
          "label": "Text (German)",
          "default": "<p>Fügen Sie hier Ihren benutzerdefinierten Text hinzu</p>"
        },
        {
          "type": "richtext",
          "id": "text_fr",
          "label": "Text (French)",
          "default": "<p>Ajoutez votre texte personnalisé ici</p>"
        },
        {
          "type": "richtext",
          "id": "text_fi",
          "label": "Text (Finnish)",
          "default": "<p>Lisää mukautettu teksti tähän</p>"
        },
        {
          "type": "url",
          "id": "button_link",
          "label": "Button Link"
        },
        {
          "type": "text",
          "id": "button_text_override",
          "label": "Custom Button Text (Default)"
        },
        {
          "type": "text",
          "id": "button_text_override_de",
          "label": "Custom Button Text (German)"
        },
        {
          "type": "text",
          "id": "button_text_override_fr",
          "label": "Custom Button Text (French)"
        },
        {
          "type": "text",
          "id": "button_text_override_fi",
          "label": "Custom Button Text (Finnish)"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Custom Image with Text",
      "category": "Custom",
      "blocks": [
        {
          "type": "custom_item",
          "settings": {
            "image": "shopify://shop_images/Highlight-Gallery_P101C.png",
            "title": "Powerful & efficient 80 Nm Motor",
            "title_de": "Leistungsstarker & effizienter 80 Nm Motor",
            "title_fr": "Moteur puissant et efficace de 80 Nm",
            "title_fi": "Suorituskykyinen 80Nm moottori",
            "text": "<p>With its 80 Nm, the powerful motor of the Long Range offers enough power for practically any situation. It is also particularly efficient for long tours!</p>",
            "text_de": "<p>Der kraftvolle Motor des Long Range bietet mit seinen 80 Nm genügend Power für praktisch jede Situation. Auch auf langen Touren ist er besonders effizient!</p>",
            "text_fr": "<p>Avec ses 80 Nm, le puissant moteur du Long Range offre suffisamment de puissance pour pratiquement toutes les situations. Il est également particulièrement efficace pour les longs trajets !</p>",
            "text_fi": "<p>Voimakas 80 Nm HEPHA P101C -moottori on yksi markkinoiden tehokkaimmista ja energiataloudellisimmista vaihtoehdoista! <strong>Tiesitkö?</strong> Voit ostaa meiltä lisäksi moottoripäivityksen, joka tekee siitä vieläkin voimakkaamman, nostaen väännön huikeaan 100Nm:n tehoon.</p>"
          }
        },
        {
          "type": "custom_item",
          "settings": {
            "image": "shopify://shop_images/Frame_382_6c7d0496-c4e9-4a6b-947f-b50a3bd7d4c0.jpg",
            "title": "90 Nm motor",
            "title_de": "90 Nm Motor",
            "title_fr": "Moteur de 90 Nm",
            "title_fi": "90 Nm moottori",
            "text": "<p>With its 90 Nm, the powerful HEPHA P101 motor of the Performance offers plenty of power for extra riding fun or as a partner for all everyday requirements.</p>",
            "text_de": "<p>Der besonders kraftvolle 90 Nm HEPHA P101C Motor ist einer der leistungsstärksten und effizientesten auf dem Markt!</p>",
            "text_fr": "<p>Le moteur HEPHA P101C particulièrement puissant de 80 Nm est l'un des plus puissants et des plus performants du marché !</p>",
            "text_fi": "<p>90 Nm:n väännöllään HEPHA P101 -moottori tarjoaa Performance-mallissa reilusti voimaa – niin ajon iloksi kuin arjen luotettavaksi kumppaniksi.</p>"
          }
        },
        {
          "type": "custom_item",
          "settings": {
            "image": "shopify://shop_images/Highlight-Gallery_P101C.png",
            "title": "Powerful & efficient 100 Nm Motor",
            "title_de": "Leistungsstarker & effizienter 100 Nm Motor",
            "title_fr": "Moteur puissant et efficace de 100 Nm",
            "text": "<p>With its 100 Nm, the powerful motor of the Long Range offers enough power for practically any situation. It is also particularly efficient for long tours!</p>",
            "text_de": "<p>Der kraftvolle Motor des Long Range bietet mit seinen 100 Nm genügend Power für praktisch jede Situation. Auch auf langen Touren ist er besonders effizient!</p>",
            "text_fr": "<p>Avec ses 100 Nm, le puissant moteur du Long Range offre suffisamment de puissance pour pratiquement toutes les situations. Il est également particulièrement efficace pour les longs trajets !</p>"
          }
        },
        {
          "type": "custom_item",
          "settings": {
            "image": "shopify://shop_images/Frame_372_1_3cb3d463-648a-40ab-a786-f86877a96eb9.jpg",
            "title": "708 Wh battery",
            "title_de": "708 Wh Akku",
            "title_fr": "Batterie de 708 Wh",
            "title_fi": "708Wh akku",
            "text": "<p>The battery of the Long Range is perfectly integrated into the frame. Together with the very efficient motor, its 708 Wh enables above-average ranges. It can be removed or charged on the bike.</p>",
            "text_de": "<p>Der Akku des Long Range ist perfekt in den Rahmen integriert. Zusammen mit dem sehr effizienten Motor ermöglicht er mit 708 Wh überdurchschnittliche Reichweiten. Er kann herausgenommen oder am Fahrrad aufgeladen werden.</p>",
            "text_fr": "<p>La batterie du Long Range est parfaitement intégrée au cadre. Associée au moteur très efficace, ses 708 Wh permettent des autonomies supérieures à la moyenne. Elle peut être retirée ou rechargée sur le vélo.</p>",
            "text_fi": "<p>Long Range-mallin akku on tyylikkäästi runkoon integroitu. Yhdistettynä tehokkaaseen moottoriin, sen 708Wh:n kapasiteetti tarjoaa keskimääräistä pidemmän toimintamatkan. Akku on ladattavissa suoraan pyörässä sijaitsevasta pistokkeesta, tai vaihtoehtoisesti irrotettavissa kotona lataamista varten.</p>"
          }
        },
        {
          "type": "custom_item",
          "settings": {
            "image": "shopify://shop_images/Frame_372_676618fc-3789-445c-86a2-dc7682aaba9b.jpg",
            "title": "High-capacity 804 Wh battery",
            "title_de": "Hochleistungsakku mit 804 Wh",
            "title_fr": "Batterie haute capacité de 804 Wh",
            "title_fi": "Korkeakapasiteettinen 804 Wh akku",
            "text": "<p>The Ultra's battery sits perfectly in the frame and offers a whopping 804 Wh capacity. In combination with the very efficient motor and the fast charger, this results in an unbeatable combination for extra range!</p>",
            "text_de": "<p>Der Akku des Ultra sitzt perfekt im Rahmen und bietet satte 804 Wh Kapazität. In Kombination mit dem sehr effizienten Motor und dem Schnellladegerät ergibt das eine unschlagbare Kombination für extra Reichweite!</p>",
            "text_fr": "<p>La batterie de l'Ultra s'intègre parfaitement dans le cadre et offre une capacité impressionnante de 804 Wh. En combinaison avec le moteur très efficace et le chargeur rapide, cela donne une combinaison imbattable pour une autonomie supplémentaire !</p>",
            "text_fi": "<p>Ultra-mallin akku on tyylikkäästi runkoon integroitu. Yhdistettynä tehokkaaseen moottoriin, sen 804Wh:n kapasiteetti tarjoaa lyömättömän kilometrikantaman. Akku on ladattavissa suoraan pyörässä sijaitsevasta pistokkeesta, tai vaihtoehtoisesti irrotettavissa kotona lataamista varten.</p>"
          }
        },
        {
          "type": "custom_item",
          "settings": {
            "image": "shopify://shop_images/Frame_377_77b0c983-39ff-4d1c-9972-46079a9e94e1.jpg",
            "title": "6 A fast charger",
            "title_de": "6 A Schnellladegerät",
            "title_fr": "Chargeur rapide 6 A",
            "title_fi": "6A nopeasti lataava pikalaturi",
            "text": "<p>Quickly mobile again - no problem with our standard HEPHA quick charger. With its 6 A, it charges almost 1.5 times faster than conventional chargers. It can be used both on the road and as a detachable wallbox at home!</p>",
            "text_de": "<p>Schnell wieder mobil - mit unserem serienmäßigen HEPHA Schnellladegerät kein Problem. Es lädt fast 1,5 mal schneller als herkömmliche Ladegeräte. Es ist sowohl mobil auf der Tour als auch als abnehmbare Wallbox zuhause einsetzbar!</p>",
            "text_fr": "<p>De nouveau rapidement mobile – aucun problème avec notre chargeur rapide HEPHA standard. Avec ses 6 A, il charge presque 1,5 fois plus vite que les chargeurs classiques. Il peut être utilisé aussi bien en déplacement que comme boîtier mural amovible à la maison !</p>",
            "text_fi": "<p>Nopeasti takaisin matkaan – HEPHA-sähköpyörien vakiona mukana toimitettavalla pikalaturilla se onnistuu helposti. Laturin 6A latausvirta tekee siitä lähes 1,5 kertaa nopeampaa kuin tavanomaisilla latureilla. Laturia voidaan käyttää joko tien päällä tai kotona, ja myös seinään asennettavana wallboxina!</p>"
          }
        },
        {
          "type": "custom_item",
          "settings": {
            "image": "shopify://shop_images/Frame_376_132dc3eb-7169-45f9-b1b8-484ff6cfbce6.jpg",
            "title": "Crystal clear 1.96\" Display",
            "title_de": "kristallklarer 1.96\" Display",
            "title_fr": "Écran 1.96\" d'une clarté exceptionnelle",
            "title_fi": "Kristallinkirkas 1.96\" näyttö",
            "text": "<p>The compact 1.96\" display sits well protected to the left of the stem. Thanks to the high-quality IPS technology, it is very easy to read even in bright light.</p>",
            "text_de": "<p>Das kompakte 1.96\"-Display sitzt gut geschützt links am Vorbau. Dank hochwertiger IPS-Technologie ist es auch bei hellem Licht sehr gut lesbar.</p>",
            "text_fr": "<p>L'écran compact de 1.96\" est bien protégé à gauche de la tige. Grâce à la technologie IPS de haute qualité, il est très facile à lire même en pleine lumière.</p>",
            "text_fi": "<p>Kompakti 1,96” näyttö sijaitsee ohjainkannattimen vasemmalla puolella, hyvin suojattuna. IPS-tekniikan ansiosta se on helposti luettavissa myös kirkkaassa valossa ja mistä katselukulmasta tahansa.</p>"
          }
        },
        {
          "type": "custom_item",
          "settings": {
            "image": "shopify://shop_images/Frame_387.jpg",
            "title": "Crystal clear 3.5'\" display",
            "title_de": "Kristallklarer 3.5'\" Display",
            "title_fr": "Ecran 3.5'' clair comme de l'eau de roche",
            "title_fi": "Kristallinkirkas 3,5\" näyttö",
            "text": "<p>The compact 3.5'\" display sits well protected to the left of the stem. Thanks to the high-quality IPS technology, it is very easy to read even in bright light.</p>",
            "text_de": "<p>Das kompakte 3.5'\"-Display sitzt gut geschützt links am Vorbau. Dank hochwertiger IPS-Technologie ist es auch bei hellem Licht sehr gut lesbar.</p>",
            "text_fr": "<p>L'écran compact de 3,5 pouces est bien protégé à gauche de la tige. Grâce à la technologie IPS de haute qualité, il est très facile à lire, même en cas de forte luminosité.</p>",
            "text_fi": "<p>Kompakti 3,5\" näyttö sijaitsee ohjainkannattimen vasemmalla puolella, hyvin suojattuna. IPS-tekniikan ansiosta se on helposti luettavissa myös kirkkaassa valossa ja mistä katselukulmasta tahansa.</p>"
          }
        },
        {
          "type": "custom_item",
          "settings": {
            "image": "shopify://shop_images/Highlight-Gallery_Shimano-Nexus.png",
            "title": "5-speed Shimano Nexus hub gears",
            "title_de": "5-Gang Shimano Nexus Nabenschaltung",
            "title_fr": "Moyeu Shimano Nexus à 5 vitesses",
            "title_fi": "5-vaihteinen Shimano Nexus -napavaihteisto",
            "text": "<p>Robust, reliable, and built for maximum loads – the SHIMANO NEXUS INTER-5E is not just a gear hub; it’s a true revolution for e-bikes. Designed to meet the unique demands of powerful mid-drive motors, it ensures a smooth riding experience – whether on your daily commute or challenging tours.</p>",
            "text_de": "<p>Robust, zuverlässig und gemacht für höchste Belastungen – die SHIMANO NEXUS INTER-5E ist nicht einfach nur eine Getriebenabe, sondern eine echte Revolution für E-Bikes. Entwickelt für die besonderen Anforderungen leistungsstarker Mittelmotoren, sorgt sie für ein geschmeidiges Fahrerlebnis – egal ob auf der täglichen Pendelstrecke oder bei anspruchsvollen Touren.</p>",
            "text_fr": "<p>Robuste, fiable et conçue pour supporter des charges maximales – la SHIMANO NEXUS INTER-5E n’est pas qu’un simple moyeu à vitesses, c’est une véritable révolution pour les vélos électriques. Conçue pour répondre aux exigences uniques des moteurs centraux puissants, elle garantit une conduite fluide, que ce soit pour vos trajets quotidiens ou vos randonnées exigeantes.</p>",
            "text_fi": "<p>Vankka, luotettava ja suunniteltu kestämään – SHIMANO NEXUS INTER-5E ei ole pelkkä napavaihteisto, vaan vallankumouksellinen tuote sähköpyöriin. Suunniteltu erityisesti voimakkaiden keskimoottorien vaatimuksiin, se takaa sulavan ajokokemuksen niin arjen ajeluissa kuin vaativammilla reiteillä.</p>"
          }
        },
        {
          "type": "custom_item",
          "settings": {
            "image": "shopify://shop_images/Frame_378_780417fd-5fd7-4d1c-a773-964cf507b6aa.jpg",
            "title": "10-speed gearshift",
            "title_de": "10-Gang Schaltung",
            "title_fr": "Boîte de vitesses à 10 vitesses",
            "title_fi": "10-nopeuksinen vaihteisto",
            "text": "<p>The Shimano Cues U6020 shifting system of the Long Range has been specially developed for e-bikes and is therefore perfect for smooth shifting even under more load.</p>",
            "text_de": "<p>Die Shimano Cues U6020 Schaltung des Long Range wurde speziell für E-Bikes entwickelt und eignet sich daher perfekt für sanfte Schaltvorgänge auch unter mehr Last.</p>",
            "text_fr": "<p>Le système de changement de vitesse Shimano Cues U6020 du Long Range a été spécialement développé pour les vélos électriques et est donc parfait pour un changement de vitesse en douceur même sous une charge plus élevée.</p>",
            "text_fi": "<p>Long Range -mallin Shimano CUES U6020 -vaihteisto on suunniteltu erityisesti sähköpyörien vaatimuksiin. Vaihteisto tarjoaa sulavaa vaihteensiirtoa myös suuremman kuormituksen alla.</p>"
          }
        },
        {
          "type": "custom_item",
          "settings": {
            "image": "shopify://shop_images/Frame_378_780417fd-5fd7-4d1c-a773-964cf507b6aa.jpg",
            "title": "11-speed gearshift",
            "title_de": "11-Gang Schaltung",
            "title_fr": "Boîte de vitesses à 11 vitesses",
            "title_fi": "11-nopeuksinen vaihteisto",
            "text": "<p>The Shimano Cues U6020 drivetrain has been specially developed for e-bikes and is therefore perfect for smooth shifting in combination with the Ultra's high-performance motor.</p>",
            "text_de": "<p>Die Shimano Cues U6020 Schaltung des Long Range wurde speziell für E-Bikes entwickelt und eignet sich daher perfekt für sanfte Schaltvorgänge auch unter mehr Last.</p>",
            "text_fr": "<p>Le système de changement de vitesse Shimano Cues U6020 du Long Range a été spécialement développé pour les vélos électriques et est donc parfait pour un changement de vitesse en douceur même sous une charge plus élevée.</p>",
            "text_fi": "<p>Ultra-mallin 11-nopeuksinen Shimano CUES U6020-vaihteisto on suunniteltu erityisesti sähköpyörien vaatimuksiin. Vaihteisto tarjoaa sulavaa vaihteensiirtoa myös suuremman kuormituksen alla.</p>"
          }
        },
        {
          "type": "custom_item",
          "settings": {
            "image": "shopify://shop_images/Highlight-Gallery_Carbon-Belt.png",
            "title": "Low-maintenance belt drive",
            "title_de": "wartungsarmer Riemenantrieb",
            "title_fr": "entraînement par courroie nécessitant peu d'entretien",
            "title_fi": "Huoltovapaa hihnaveto",
            "text": "<p>No rattling, no grease, no rust – the Gates Carbon Drive CDX is the drivetrain for those who demand more. Durable, quiet, and incredibly strong, it handles every challenge, whether on long-distance rides or rough off-road terrain.</p>",
            "text_de": "<p>Kein Klappern, kein Schmieren, kein Rost – der Gates Carbon Drive CDX ist der Antrieb für alle, die mehr wollen. Langlebig, leise und unglaublich stark, trotzt er jeder Herausforderung, egal ob auf langen Strecken oder im rauen Off-Road-Terrain.</p>",
            "text_fr": "<p>Pas de bruit, pas de graisse, pas de rouille – le Gates Carbon Drive CDX est la transmission pour ceux qui en veulent plus. Durable, silencieux et incroyablement robuste, il relève tous les défis, que ce soit sur de longues distances ou en terrain accidenté.</p>",
            "text_fi": "<p>Ei kolinaa, ei rasvaa, ei ruostetta – Gates Carbon Drive CDX on valinta niille kuljettajille, jotka arvostavat voimansiirron maksimaalista kestävyyttä ja hiljaisuutta – Hihnaveto on valmis kohtaamaan pitkät ajoreissut ja karummatkin maastot.</p>"
          }
        },
        {
          "type": "custom_item",
          "settings": {
            "image": "shopify://shop_images/Frame_373_465529dc-8a77-4e97-bf68-a5b00643c0a6.jpg",
            "title": "Special e-bike suspension fork",
            "title_de": "Spezielle E-Bike Federgabel",
            "title_fr": "Fourche à suspension spéciale pour vélo électrique",
            "title_fi": "Sähköpyöriin suunniteltu joustohaarukka",
            "text": "<p>The Suntour NEX-25 with its 63 mm suspension travel provides additional comfort, dampens vibrations and compensates for bumps.</p>",
            "text_de": "<p>Die Suntour NEX-25 mit ihren 63 mm Federweg sorgt für zusätzlichen Komfort, dämpft Vibrationen und gleicht Unebenheiten aus..</p>",
            "text_fr": "<p>Le Suntour NEX-25 avec son débattement de suspension de 63 mm offre un confort supplémentaire, amortit les vibrations et compense les bosses.</p>",
            "text_fi": "<p>Suntour NEX-25 63mm joustomatkallaan parantaa ajomukavuutta tehokkaasti, vaimentaa tärinöitä ja tasaa reitin epätasaisuuksia.</p>"
          }
        },
        {
          "type": "custom_item",
          "settings": {
            "image": "shopify://shop_images/Frame_381.jpg",
            "title": "Multifunctional luggage carrier",
            "title_de": "Multifunktionaler Gepäckträger",
            "title_fr": "Porte-bagages multifonctionnel",
            "title_fi": "Monitoiminen tavarateline",
            "text": "<p>The robust pannier rack always has a solution at hand: whether for panniers on the side or for quickly clicking in baskets thanks to the universal MIK HD interface.</p>",
            "text_de": "<p>Der robuste Gepäckträger hat immer eine Lösung parat: ob für seitlichen Packtaschen oder für das schnelle Einklicken von Körben dank der universellen MIK HD Schnittstelle..</p>",
            "text_fr": "<p>Le porte-bagages robuste a toujours une solution à portée de main : que ce soit pour les sacoches latérales ou pour cliquer rapidement dans les paniers grâce à l'interface universelle MIK HD.</p>",
            "text_fi": "<p>Tukeva tavarateline taipuu moneen: sivulaukuille tai vaikka kätevästi MIK HD-järjestelmään kiinnityvälle korille.</p>"
          }
        },
        {
          "type": "custom_item",
          "settings": {
            "image": "shopify://shop_images/Frame_369.jpg",
            "title": "Hydraulic disc brakes",
            "title_de": "Hydraulische Scheibenbremsen",
            "title_fr": "Freins à disque hydrauliques",
            "title_fi": "Hydrauliset levyjarrut",
            "text": "<p>The two hydraulic disc brakes with 180 mm brake discs at the front bring you safely to a halt at all times.</p>",
            "text_de": "<p>Die beiden hydraulischen Scheibenbremsen mit 180mm Bremsscheibe vorne bringen Sie jederzeit sicher zum Stehen..</p>",
            "text_fr": "<p>Les deux freins à disque hydrauliques avec disques de frein de 180 mm à l'avant vous permettent de vous arrêter en toute sécurité à tout moment.</p>",
            "text_fi": "<p>Molemmissa päissä tehokkaat hydrauliset jarrut, jotka ovat varustettu suurilla 180mm levyillä. Tämä varmistaa turvallisen pysäytyksen kaikissa tilanteissa.</p>"
          }
        },
        {
          "type": "custom_item",
          "settings": {
            "image": "shopify://shop_images/Frame_374.png",
            "title": "Automatic light sensor",
            "title_de": "Automatischer Lichtsensor",
            "title_fr": "Capteur de lumière automatique",
            "title_fi": "Automaattinen valosensori",
            "text": "<p>The light on your Trekking 7 is controlled fully automatically by a light sensor. This is particularly practical in suddenly changing light conditions, such as tunnels!</p>",
            "text_de": "<p>Das Licht an Ihrem Trekking 7 wird vollautomatisch durch einen Lichtsensor gesteuert. Besonders praktisch bei plötzlich wechselnden Lichtverhältnissen, wie Tunneln!.</p>",
            "text_fr": "<p>L'éclairage de votre Trekking 7 est contrôlé de manière entièrement automatique par un capteur de lumière. Cela est particulièrement pratique en cas de changement soudain de la luminosité, comme dans les tunnels !</p>",
            "text_fi": "<p>Valaistus ohjautuu täysin automaattisesti valosensorilla – erityisen hyödyllinen ominaisuus äkillisesti vaihtuvissa valaistusolosuhteissa, kuten tunneliin ajettaessa!</p>"
          }
        },
        {
          "type": "custom_item",
          "settings": {
            "image": "shopify://shop_images/app_432ee281-bc29-43b1-9f76-b357a74d18a6.png",
            "title": "Smart APP",
            "title_de": "Smarte App",
            "title_fr": "Application intelligente",
            "title_fi": "Älykäs mobiilisovellus",
            "text": "<p>With the HEPHA APP, you can unlock the full potential of your e-bike: record rides, configure your e-bike, update your system or get help with questions.</p>",
            "text_de": "<p>Mit der HEPHA APP setzen Sie das volle Potenzial Ihres E-Bikes frei: Zeichnen Sie Fahrten auf, konfigurieren Sie Ihr E-Bike, updaten Sie Ihr System oder erhalten Sie Hilfe bei Fragen..</p>",
            "text_fr": "<p>Avec l'application HEPHA, vous pouvez exploiter tout le potentiel de votre vélo électrique : enregistrer des trajets, configurer votre vélo électrique, mettre à jour votre système ou obtenir de l'aide en cas de questions.</p>",
            "text_fi": "<p>HEPHA-sovelluksella valjastat pyöräsi koko potentiaalin käyttöösi: tallenna ajosi, konfiguroi moottorin avustustasot ja löydä apua tukipalvelusta.</p>"
          }
        },
        {
          "type": "custom_item",
          "settings": {
            "image": "shopify://shop_images/Highlight-Gallery_EnvioloHD.png",
            "title": "continuously variable Enviolo hub gears",
            "title_de": "stufenlose Enviolo Nabenschaltung",
            "title_fr": "engrenages à moyeu Enviolo à variation continue",
            "title_fi": "Ajon mukaan säätyvä Enviolo-napavaihteisto",
            "text": "<p>Maximum comfort and superior durability – that’s what our drivetrain system offers. With the stepless manual technology, you shift smoothly without noticeable transitions. No jerking, no locked gears – just a seamless, intuitive riding experience that lets you focus on the road ahead. The specially designed HEAVY DUTY hub is built for high loads and is perfect for carrying heavy cargo over long distances. Experience maximum efficiency on every ride.</p>",
            "text_de": "<p>Maximaler Komfort und höchste Belastbarkeit – das macht unser Antriebssystem aus. Dank der stufenlosen manuellen Technologie schaltest du sanft und ohne spürbare Übergänge. Kein Ruckeln, keine blockierten Gänge – nur ein müheloses, intuitives Fahrgefühl, bei dem du dich ganz auf die Strecke konzentrieren kannst. Die speziell entwickelte HEAVY DUTY-Nabe hält auch hohen Belastungen stand und ist ideal für schwere Ladungen auf langen Strecken. So erlebst du maximale Effizienz bei jeder Fahrt.</p>",
            "text_fr": "<p>Un confort maximal et une robustesse inégalée – voici ce que notre système de transmission vous offre. Grâce à la technologie manuelle à variation continue, le passage des vitesses se fait en douceur, sans à-coups. Plus de blocages, plus de pédalage à vide – juste une expérience de conduite fluide et intuitive qui vous permet de vous concentrer sur votre trajet. Le moyeu HEAVY DUTY, spécialement conçu pour supporter de fortes charges, est idéal pour transporter du poids sur de longues distances. Profitez d'une efficacité maximale à chaque sortie.</p>",
            "text_fi": "<p>Huippuluokan mukavuutta ja ylivoimaista kestävyyttä – juuri sitä tarjoaa Enviolo-voimansiirtomme. Portaattoman manuaaliteknologian ansiosta vaihdat vaihteita tasaisesti ilman havaittavia vaihteensiirtoja. Ei nykimistä, viivettä tai jumittavia vaihteita, vaan saumatonta ja sulavaa ajoa. Tätä vaihteistoa varta vasten kehitetty HEAVY DUTY-napa kestää suuria kuormia ja vääntömomentteja, ja soveltuu erinomaisesti raskaidenkin kuormien kuljetukseen pitkillä matkoilla. Koe innovaation tulos, ja maksimaalinen ajokokemus Ultra-mallille kanssa.</p>"
          }
        },
        {
          "type": "custom_item",
          "settings": {
            "image": "shopify://shop_images/Frame_384_45757a3e-7993-4d32-a9dd-b79cde501f7f.jpg",
            "title": "Premium alloy frame",
            "title_de": "Hochwertiger Alurahmen",
            "title_fr": "Cadre en alliage de qualité supérieure",
            "title_fi": "Huippulaadukas alumiinirunko",
            "text": "<p>Experience unrivaled performance with our premium alloy frame e-mountainbike. Lightweight yet robust, it's engineered for superior agility and durability on any terrain.</p>",
            "text_de": "<p>Erleben Sie unvergleichliche Leistung mit unserem E-Mountainbike mit Premium-Leichtmetallrahmen. Es ist leicht und dennoch robust und auf überragende Agilität und Haltbarkeit auf jedem Gelände ausgelegt..</p>",
            "text_fr": "<p>Bénéficiez de performances inégalées avec notre VTT électrique à cadre en alliage haut de gamme. Léger mais robuste, il est conçu pour une agilité et une durabilité supérieures sur tous les terrains.</p>",
            "text_fi": "<p>Koe premium-alumiinirunkoisten sähkömaastopyöriemme tarjoamaa suorituskykä vailla vertaansa. Kevyt mutta kestävä rakenne takaa erinomaisen ketteryyden ja luotettavuuden kaikilla alustoilla, ja saumattomaksi hiottu viimeistely luo pyörälle esteettisen ja laadukkaan yleisvaikutelman.</p>"
          }
        },
        {
          "type": "custom_item",
          "settings": {
            "image": "shopify://shop_images/Frame_387_ef8b9bfa-988a-4741-96cb-e895b39c16df.jpg",
            "title": "Prepared for everyday life",
            "title_de": "Standard: Für den Alltag gewappnet",
            "title_fr": "Préparé pour la vie quotidienne",
            "title_fi": "Valmiina arjen haasteisiin",
            "text": "<p>All attachment points for mudguards, kickstand, pannier rack and even the frame lock are present but integrated so discreetly that they do not detract from the sporty character.</p>",
            "text_de": "<p>Sämtliche Befestigungspunkte für Schutzbleche, Ständer, Gepäckträger und sogar das Rahmenschloss sind vorhanden, jedoch so dezent integriert, dass sie den sportlichen Charakter nicht beeinträchtigen..</p>",
            "text_fr": "<p>Tous les points de fixation pour les garde-boue, la béquille, le porte-bagages et même le verrou du cadre sont présents mais intégrés de manière si discrète qu'ils ne nuisent pas au caractère sportif.</p>",
            "text_fi": "<p>Pyörästä löytyy kiinnityspisteet kaikelle tarvittavalle; lokasuojille, seisontatuelle, tavaratelineelle ja jopa runkolukolle – mutta ne ovat integroitu niin huomaamattomasti, että pyörän urheilullinen ilme säilyy tarvittaessa täysin.</p>"
          }
        },
        {
          "type": "customslide",
          "settings": {
            "image": "shopify://shop_images/Frame_396.jpg",
            "title": "Carbon frame",
            "title_de": "Carbonrahmen",
            "title_fr": "Cadre en carbone",
            "description": "Light, stiff and robust: these characteristics of the Ultra's carbon frame make it the perfect partner for the high-performance drive unit.",
            "description_de": "Leicht, steif und robust: Diese Eigenschaften des Carbonrahmens des Ultra machen ihn zum perfekten Partner für die leistungsstarke Antriebseinheit.",
            "description_fr": "Léger, rigide et robuste : ces caractéristiques du cadre en carbone de l'Ultra en font le partenaire idéal pour le groupe motopropulseur hautes performances.",
            "title_fi": "Hiilikuiturunko",
            "description_fi": "Kevyt, jäykkä ja kestävä – nämä hiilikuituisen rungon ominaisuudet tekevät pyörästä täydellisen ja suorituskykyisen kumppanin maastoseikkailuihin."
          }
        },
        {
          "type": "customslide",
          "settings": {
            "image": "shopify://shop_images/Frame_397.jpg",
            "title": "4-Link virtual pivot suspension system",
            "title_de": "4-Link virtual pivot-federungssystem",
            "title_fr": "Système de suspension à pivot virtuel à 4 bras",
            "description": "This special system offers an excellent balance between traction and sensitivity as well as independence from braking influences. This guarantees maximum control even on the roughest trails.",
            "description_de": "Dieses spezielle System bietet eine hervorragende Balance zwischen Traktion und Sensibilität sowie Unabhängigkeit von Bremseinflüssen. Dies garantiert maximale Kontrolle auch auf den härtesten Trails.",
            "description_fr": "Ce système spécial offre un excellent rapport entre traction et sensibilité ainsi qu'une indépendance vis-à-vis des influences de freinage. Cela garantit un contrôle maximal même sur les sentiers les plus accidentés.",
            "title_fi": "4-Linkkuinen Virtual Pivot -jousitusjärjestelmä",
            "description_fi": "Tämä innovatiivinen jousitusjärjestelmä tarjoaa erinomaisen tasapainon pidon ja herkkyyden välillä, ja toimii jarrutustilanteissa loogisesti. Tämä takaa maksimaalisen pyörän hallinnan haastavimmillakin metsäreiteillä."
          }
        },
        {
          "type": "customslide",
          "settings": {
            "image": "shopify://shop_images/RockShox-Recon-Silver.png",
            "title": "Rock Shox Recon Silver with 150 mm",
            "title_de": "Rock Shox Recon Silver mit 150 mm",
            "title_fr": "Rock Shox Recon Silver avec 150 mm",
            "description": "With a lightweight magnesium crown, precise Motion Control damper and adjustable settings for air pressure and damping, this suspension fork offers plenty of customization and control on any trail.",
            "description_de": "Mit einer leichten Magnesiumkrone, einem präzisen Motion Control-Dämpfer und anpassbaren Einstellungen für Luftdruck und Dämpfung bietet diese Federgabel zahlreiche Anpassungsmöglichkeiten und Kontrolle auf jedem Trail.",
            "description_fr": "Avec une couronne légère en magnésium, un amortisseur Motion Control précis et des réglages réglables pour la pression d'air et l'amortissement, cette fourche à suspension offre beaucoup de personnalisation et de contrôle sur n'importe quel sentier.",
            "title_fi": "Rock Shox Recon Silver 150 mm",
            "description_fi": "Kevyt magnesiumkruunu, herkkätoiminen Motion Control-vaimennin sekä vaimennuksen tarkat säätömahdollisuudet tekevät tästä ilmajousitetusta haarukasta erinomaisen ja helposti hallittavan kumppanin kaikille poluille, haastavuudesta riippumatta."
          }
        }
      ]
    }
  ]
}
{% endschema %}

{% assign locale_prefix = request.locale.iso_code | slice: 0, 2 | downcase %}

{% capture section_title %}
  {% case locale_prefix %}
    {% when 'de' %}{{ section.settings.title_de | default: section.settings.title }}
    {% when 'fr' %}{{ section.settings.title_fr | default: section.settings.title }}
    {% when 'fi' %}{{ section.settings.title_fi | default: section.settings.title }}
    {% else %}{{ section.settings.title }}
  {% endcase %}
{% endcapture %}

{% capture default_button_text %}
  {% case locale_prefix %}
    {% when 'de' %}{{ section.settings.button_text_de | default: section.settings.button_text }}
    {% when 'fr' %}{{ section.settings.button_text_fr | default: section.settings.button_text }}
    {% when 'fi' %}{{ section.settings.button_text_fi | default: section.settings.button_text }}
    {% else %}{{ section.settings.button_text }}
  {% endcase %}
{% endcapture %}

{% assign show_title_global = section.settings.show_title_global %}
{% assign show_text_global = section.settings.show_text_global %}
{% assign show_button_global = section.settings.show_button_global %}
{% assign all_content_hidden = true %}
{% if show_title_global or show_text_global or show_button_global %}
  {% assign all_content_hidden = false %}
{% endif %}

<div
  class="custom-image-text-section"
  id="custom-image-text-{{ section.id }}"
  data-section-id="{{ section.id }}"
  data-aspect-ratio="{{ section.settings.image_aspect_ratio }}"
  style="
    --button-bg: {{ section.settings.button_background_color | default: '#ffffff' }};
    --button-text: {{ section.settings.button_text_color | default: '#000000' }};
    --button-border: {{ section.settings.button_border_color | default: '#000000' }};
    --button-hover-bg: {{ section.settings.button_hover_background_color | default: '#222222' }};
    --button-hover-text: {{ section.settings.button_hover_text_color | default: '#ffffff' }};
    --button-hover-border: {{ section.settings.button_hover_border_color | default: '#222222' }};
  "
>
  <div
    class="section-header"
    {% if section.settings.hide_title %}
      style="display: none;"
    {% endif %}
  >
    <h2 class="section-title" id="highlights">{{ section_title | escape }}</h2>
  </div>
  <div class="carousel-outer">
    <div class="carousel-container">
      <div class="carousel-track">
        <div class="carousel-slides" id="carousel-slides-{{ section.id }}">
          {% for block in section.blocks %}
            {% capture block_title %}
              {% case locale_prefix %}
                {% when 'de' %}{{ block.settings.title_de | default: block.settings.title }}
                {% when 'fr' %}{{ block.settings.title_fr | default: block.settings.title }}
                {% when 'fi' %}{{ block.settings.title_fi | default: block.settings.title }}
                {% else %}{{ block.settings.title }}
              {% endcase %}
            {% endcapture %}

            {% capture block_text %}
              {% case locale_prefix %}
                {% when 'de' %}{{ block.settings.text_de | default: block.settings.text }}
                {% when 'fr' %}{{ block.settings.text_fr | default: block.settings.text }}
                {% when 'fi' %}{{ block.settings.text_fi | default: block.settings.text }}
                {% else %}{{ block.settings.text }}
              {% endcase %}
            {% endcapture %}

            {% capture override_button_text %}
              {% case locale_prefix %}
                {% when 'de' %}{{ block.settings.button_text_override_de | default: block.settings.button_text_override }}
                {% when 'fr' %}{{ block.settings.button_text_override_fr | default: block.settings.button_text_override }}
                {% when 'fi' %}{{ block.settings.button_text_override_fi | default: block.settings.button_text_override }}
                {% else %}{{ block.settings.button_text_override }}
              {% endcase %}
            {% endcapture %}

            {% assign item_button_text = override_button_text | strip | default: default_button_text | strip %}

            <div
              class="carousel-slide {% if all_content_hidden %}all-content-hidden{% endif %}"
              {{ block.shopify_attributes }}
            >
              <div class="slide-image">
                {%- liquid
                  assign loading = 'lazy'
                  if forloop.index < 4
                    assign loading = 'eager'
                  endif
                  assign has_image = block.settings.image | default: false
                -%}
                {%- if has_image -%}
                  <div
                    class="image-wrapper"
                    data-lightbox-image="{{ block.settings.image | img_url: 'master' }}"
                    data-lightbox-caption="{{ block_title | strip_html }}"
                  >
                    {% if block.settings.image_link != blank %}
                      <a href="{{ block.settings.image_link }}" style="display: block; width: 100%;">
                    {% endif %}
                    <img
                      src="{{ block.settings.image | img_url: '1200x' }}"
                      onclick="openLightbox('{{ block.settings.image | img_url: 'master' }}')"
                      data-lightbox-image="{{ block.settings.image | img_url: 'master' }}"
                      data-lightbox-caption="{{ block_title | strip_html }}"
                      loading="{{ loading }}"
                      class="carousel-image"
                    >
                    {% if block.settings.image_link != blank %}
                      </a>
                    {% endif %}
                  </div>
                {%- else -%}
                  <div class="image-placeholder">{{ 'image' | placeholder_svg_tag }}</div>
                {%- endif -%}
              </div>
              {% unless all_content_hidden %}
                <div class="slide-content">
                  {% if block_title != blank and show_title_global %}
                    {% if block.settings.title_link != blank %}
                      <a href="{{ block.settings.title_link }}" style="display: block;">
                    {% endif %}
                    <h3 class="custom-title">
                      {{ block_title }}
                    </h3>
                    {% if block.settings.title_link != blank %}
                      </a>
                    {% endif %}
                  {% endif %}
                  {% if block_text != blank and show_text_global %}
                    <div class="custom-text">
                      {{ block_text }}
                    </div>
                  {% endif %}
                  {% if block.settings.button_link != blank and show_button_global %}
                    <a href="{{ block.settings.button_link }}" class="customitem-ibutton">
                      {{- item_button_text -}}
                    </a>
                  {% endif %}
                </div>
              {% endunless %}
            </div>
          {% endfor %}
        </div>
      </div>
    </div>
    <div class="carousel-arrows">
      <div class="carousel-arrow prev-arrow">
        {% render 'icon-prev-arrow' %}
      </div>
      <div class="carousel-arrow next-arrow">
        {% render 'icon-next-arrow' %}
      </div>
    </div>
  </div>
</div>

<div
  id="lightbox"
  class="lightbox"
  onclick="closeLightbox()"
>
  <span class="close" onclick="closeLightbox(); event.stopPropagation();">&times;</span>
</div>

<style>
  .custom-image-text-section {
    position: relative;
    z-index: 1;
    margin: 80px 0;
    width: 100%;
  }

  .section-header {
    margin-bottom: 30px;
    padding-left: 50px;
    position: relative;
    z-index: 1;
  }

  .carousel-outer {
    position: relative;
    padding-left: 50px;
    width: 100%;
    overflow: hidden;
    box-sizing: border-box;
  }

  .carousel-track {
    width: calc(100% + 50px);
    margin-left: -50px;
    padding-right: 50px;
  }

  .carousel-slides {
    padding-right: 0;
  }

  .carousel-track {
    touch-action: pan-y;
    overflow: hidden;
  }

  .carousel-slides {
    will-change: transform;
    display: flex;
    min-width: 100%;
    transition: transform 0.5s ease;
  }

  .section-title {
    font-size: 32px;
    font-weight: 700;
    color: #222;
    text-align: left;
    margin: 0 20px 30px 0;
    position: relative;
    z-index: 1;
  }

  .carousel-container {
    position: relative;
    border-radius: 12px;
    width: 100%;
  }

  .carousel-track {
    overflow: visible;
  }

  .carousel-slides {
    display: flex;
    padding: 5px 50px;
  }

  .carousel-slide {
    flex: 0 0 auto;
    width: calc(30% - 20px);
    margin-right: 20px;
    background: #fff;
    border-radius: 10px;
    overflow: hidden;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    flex-shrink: 0;
  }

  .carousel-slide.all-content-hidden .slide-image {
    border-radius: 10px;
  }

  .carousel-slide:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
  }

  .slide-image {
    position: relative;
    overflow: hidden;
    border-radius: 10px 10px 0 0;
    display: block;
    width: 100%;
    transition: all 0.3s ease;
    cursor: zoom-in;
  }

  .image-wrapper {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;
  }

  .carousel-image {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center;
    display: block;
    transition: transform 0.4s ease;
  }

  [data-aspect-ratio='16/9'] .slide-image {
    padding-bottom: 56.25%;
  }

  [data-aspect-ratio='3/4'] .slide-image {
    padding-bottom: 133.33%;
  }

  [data-aspect-ratio='1/1'] .slide-image {
    padding-bottom: 100%;
  }

  [data-aspect-ratio='natural'] .carousel-image {
    object-fit: contain;
  }

  .image-placeholder {
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .image-placeholder svg {
    width: 50%;
    height: 50%;
    opacity: 0.3;
  }

  .slide-content {
    padding: 20px 20px 40px;
  }

  .custom-title {
    font-size: 20px;
    line-height: 1.4;
    color: #222;
    margin: 0 0 15px;
    transition: color 0.2s;
    font-weight: 600;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
    text-overflow: ellipsis;
    max-height: 3em;
  }

  a:hover .custom-title {
    color: #0066cc;
  }

  .custom-text {
    color: #555;
    font-size: 15px;
    line-height: 1.6;
    margin-bottom: 20px;
  }

  .custom-text p {
    margin: 0 0 10px;
  }

  .customitem-ibutton {
    display: inline-block;
    background-color: var(--button-bg);
    color: var(--button-text);
    border: 2px solid var(--button-border);
    border-radius: 50px;
    text-align: center;
    font-weight: 400;
    line-height: 1;
    padding: 12px 20px;
    outline: 0;
    cursor: pointer;
    transition: all 0.3s ease;
  }

  .customitem-ibutton:hover {
    background-color: var(--button-hover-bg);
    color: var(--button-hover-text);
    border-color: var(--button-hover-border);
  }

  .carousel-arrows {
    position: absolute;
    top: 50%;
    left: 50px;
    right: 0;
    display: flex;
    justify-content: space-between;
    transform: translateY(-50%);
    pointer-events: none;
    z-index: 10;
    width: calc(100% - 50px);
  }

  .carousel-arrow {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background: rgba(0, 0, 0, 0.8);
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    pointer-events: auto;
    opacity: 0.8;
    transition: all 0.3s;
    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.25);
  }

  .carousel-arrow:hover {
    opacity: 1;
    background: #000;
    transform: scale(1.05);
  }

  .carousel-arrow.hidden {
    visibility: hidden;
    opacity: 0;
    pointer-events: none;
  }

  /* ======== LIGHTBOX STYLES ======== */
  .lightbox {
    display: none;
    position: fixed;
    z-index: 10000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.9);
    justify-content: center;
    align-items: center;
  }

  .lightbox-content {
    max-width: 90%;
    max-height: 90%;
    border-radius: 4px;
    box-shadow: 0 0 40px rgba(0, 0, 0, 0.8);
    transition: transform 0.3s ease;
  }

  .close {
    position: absolute;
    top: 25px;
    right: 35px;
    color: white;
    font-size: 50px;
    font-weight: 300;
    cursor: pointer;
    z-index: 10;
    transition: opacity 0.3s;
  }

  .close:hover {
    opacity: 0.8;
  }

  @media (max-width: 1200px) {
    .carousel-slide {
      width: calc(50% - 15px);
    }

    .carousel-arrows {
      width: calc(100% - 50px);
    }
  }

  @media (max-width: 768px) {
    .carousel-slide {
      width: calc(100% - 20px);
      margin-right: 10px;
    }

    .carousel-arrow {
      width: 40px;
      height: 40px;
    }

    .custom-image-text-section {
      margin: 50px 0;
    }

    .section-title {
      font-size: 26px;
    }

    .section-header {
      padding-left: 15px;
    }

    .carousel-outer {
      padding-left: 15px;
    }

    .carousel-arrows {
      left: 15px;
      width: calc(100% - 15px);
    }

    .carousel-track {
      width: calc(100% + 15px);
      margin-left: -15px;
      padding-right: 15px;
    }

    /* Mobile lightbox adjustments */
    .lightbox-content {
      max-width: 95%;
      max-height: 80%;
    }

    .close {
      top: 15px;
      right: 20px;
      font-size: 40px;
    }
  }

  @media (max-width: 480px) {
    .carousel-arrows {
      display: none;
    }

    .section-header {
      padding-left: 15px;
    }

    .carousel-outer {
      padding-left: 15px;
    }

    .carousel-track {
      width: calc(100% + 15px);
      margin-left: -15px;
      padding-right: 15px;
    }

    /* Mobile lightbox adjustments */
    .lightbox-content {
      max-width: 98%;
      max-height: 70%;
    }

    .close {
      top: 10px;
      right: 15px;
      font-size: 35px;
    }
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    // ======== CAROUSEL FUNCTIONALITY ========
    const carousels = document.querySelectorAll('.custom-image-text-section');

    carousels.forEach((section) => {
      const slidesContainer = section.querySelector('.carousel-slides');
      const slides = Array.from(slidesContainer.children);
      const prevArrow = section.querySelector('.prev-arrow');
      const nextArrow = section.querySelector('.next-arrow');
      const carouselTrack = section.querySelector('.carousel-track');

      if (!slidesContainer || slides.length === 0) return;

      let currentIndex = 0;
      let slidesToShow = 3;
      let slideWidth = 0;
      let touchStartX = 0;
      let touchStartY = 0;
      let touchEndX = 0;
      let isDragging = false;
      let isHorizontal = false;

      function initCarousel() {
        updateSlidesToShow();
        updateSlideWidth();
        updateArrows();
        positionSlides();

        const aspectRatio = section.dataset.aspectRatio;
        updateAspectRatio(aspectRatio);
      }

      function updateAspectRatio(ratio) {
        const slideImages = section.querySelectorAll('.slide-image');
        slideImages.forEach((img) => {
          img.dataset.aspectRatio = ratio;
        });
      }

      function updateSlidesToShow() {
        if (window.innerWidth < 769) {
          slidesToShow = 1;
        } else if (window.innerWidth < 1201) {
          slidesToShow = 2;
        } else {
          slidesToShow = 3;
        }
      }

      function updateSlideWidth() {
        if (slides.length > 0) {
          slideWidth = slides[0].offsetWidth + parseFloat(window.getComputedStyle(slides[0]).marginRight);
        }
      }

      function updateArrows() {
        if (slides.length <= slidesToShow) {
          prevArrow.classList.add('hidden');
          nextArrow.classList.add('hidden');
          return;
        }

        prevArrow.classList.remove('hidden');
        nextArrow.classList.remove('hidden');

        prevArrow.style.opacity = currentIndex === 0 ? '0.3' : '0.8';
        nextArrow.style.opacity = currentIndex >= slides.length - slidesToShow ? '0.3' : '0.8';
      }

      function positionSlides() {
        slidesContainer.style.transform = `translateX(-${currentIndex * slideWidth}px)`;
      }

      function movePrev() {
        if (currentIndex > 0) {
          currentIndex--;
          updateArrows();
          positionSlides();
        }
      }

      function moveNext() {
        if (currentIndex < slides.length - slidesToShow) {
          currentIndex++;
          updateArrows();
          positionSlides();
        }
      }

      // Carousel event handlers
      if (prevArrow) prevArrow.addEventListener('click', movePrev);
      if (nextArrow) nextArrow.addEventListener('click', moveNext);

      // Touch event handlers
      if (carouselTrack) {
        carouselTrack.addEventListener('touchstart', handleTouchStart);
        carouselTrack.addEventListener('touchmove', handleTouchMove);
        carouselTrack.addEventListener('touchend', handleTouchEnd);
      }

      function handleTouchStart(e) {
        touchStartX = e.touches[0].clientX;
        touchStartY = e.touches[0].clientY;
        isDragging = true;
        isHorizontal = false;
        slidesContainer.style.transition = 'none';
      }

      function handleTouchMove(e) {
        if (!isDragging) return;

        const touchX = e.touches[0].clientX;
        const touchY = e.touches[0].clientY;
        const diffX = touchX - touchStartX;
        const diffY = touchY - touchStartY;
        touchEndX = touchX;

        if (!isHorizontal) {
          if (Math.abs(diffX) > Math.abs(diffY)) {
            isHorizontal = true;
          } else {
            return;
          }
        }

        if (isHorizontal) {
          e.preventDefault();
        }

        const maxOffset = Math.max(0, (slides.length - slidesToShow) * slideWidth);
        const minOffset = 0;

        let tempOffset = currentIndex * slideWidth * -1 + diffX;

        if (tempOffset > minOffset) tempOffset = minOffset;
        if (tempOffset < -maxOffset) tempOffset = -maxOffset;

        slidesContainer.style.transform = `translateX(${tempOffset}px)`;
      }

      function handleTouchEnd() {
        if (!isDragging) return;

        isDragging = false;
        slidesContainer.style.transition = 'transform 0.5s ease';

        const diff = touchEndX - touchStartX;
        const threshold = 50;

        if (isHorizontal) {
          if (diff > threshold) {
            movePrev();
          } else if (diff < -threshold) {
            moveNext();
          } else {
            positionSlides();
          }
        }
      }

      // Initialize carousel
      initCarousel();

      // Window resize handler
      window.addEventListener('resize', function () {
        updateSlidesToShow();
        updateSlideWidth();
        updateArrows();
        positionSlides();
      });
    });

    // ======== LIGHTBOX FUNCTIONALITY ========
    // Create lightbox image element if not exists
    let lightboxImg = document.getElementById('lightboxImg');
    if (!lightboxImg) {
      lightboxImg = document.createElement('img');
      lightboxImg.id = 'lightboxImg';
      lightboxImg.className = 'lightbox-content';
      document.getElementById('lightbox').appendChild(lightboxImg);
    }

    // Add click handlers to all carousel images
    const carouselImages = document.querySelectorAll('.carousel-image');
    carouselImages.forEach((image) => {
      image.addEventListener('click', function (e) {
        e.preventDefault();
        const imageSrc = this.dataset.lightboxImage || this.src;
        openLightbox(imageSrc);
      });
    });

    // Lightbox functions
    function openLightbox(imageSrc) {
      const lightbox = document.getElementById('lightbox');

      // Set loading state
      lightboxImg.src = '';
      lightboxImg.alt = 'Loading...';

      // Create a new image to preload
      const preloadImg = new Image();
      preloadImg.onload = function () {
        lightboxImg.src = imageSrc;
        lightboxImg.alt = 'Enlarged image';
        lightbox.style.display = 'flex';
        document.body.style.overflow = 'hidden';
      };
      preloadImg.src = imageSrc;
    }

    function closeLightbox() {
      const lightbox = document.getElementById('lightbox');
      lightbox.style.display = 'none';
      document.body.style.overflow = 'auto';
    }

    // Close button handler
    const closeBtn = document.querySelector('.lightbox .close');
    if (closeBtn) {
      closeBtn.addEventListener('click', function (e) {
        e.stopPropagation();
        closeLightbox();
      });
    }

    // Lightbox background click handler
    const lightbox = document.getElementById('lightbox');
    if (lightbox) {
      lightbox.addEventListener('click', function (e) {
        if (e.target === lightbox) {
          closeLightbox();
        }
      });
    }

    // Escape key handler
    document.addEventListener('keydown', function (e) {
      if (e.key === 'Escape') {
        closeLightbox();
      }
    });
  });
</script>
