<div class="container fully-spaced-row">
  <div class="small-form account-form" {%- render 'animation-attrs', attrs: 'data-cc-animate' -%}>
    <div id="customer">
      <!-- Create Customer -->
      <div id="create-customer">
        <div class="page-header">
          <h2 class="title">{{ 'customer.register.title' | t }}</h2>
          {%- liquid
            assign lang_for_header = request.locale.iso_code
            case lang_for_header
              when 'de'
                assign register_note = 'Erstellen Sie Ihr Konto, um Bestellungen zu verfolgen und Prämien zu erhalten.'
              when 'fr'
                assign register_note = 'Créez votre compte pour suivre vos commandes et profiter des récompenses.'
              when 'fi'
                assign register_note = 'Luo tili, jotta voit seurata tilauksia ja hyödyntää palkintoja.'
              else
                assign register_note = 'Create your account to track orders and enjoy rewards.'
            endcase
          -%}
          <p class="note">{{ register_note }}</p>
        </div>
        <div class="auth-card">
        {% form 'create_customer' %}
          {%- render 'form-errors', form: form -%}

          <div class="input-row">
            <label for="first_name" class="login">{{ 'customer.register.first_name' | t }}</label>
            <div class="input-with-icon">
              <span class="input-icon-left">{% render 'icon', icon: 'silhouette', size: 'small' %}</span>
              <input type="text" value="" name="customer[first_name]" id="first_name" class="large" size="30" />
            </div>
          </div>

          <div class="input-row">
            <label for="last_name" class="login">{{ 'customer.register.last_name' | t }}</label>
            <div class="input-with-icon">
              <span class="input-icon-left">{% render 'icon', icon: 'silhouette', size: 'small' %}</span>
              <input type="text" value="" name="customer[last_name]" id="last_name" class="large" size="30" />
            </div>
          </div>

          <div class="input-row">
            <label for="email" class="login">{{ 'customer.register.email' | t }}</label>
            <div class="input-with-icon">
              <span class="input-icon-left">{% render 'icon', icon: 'mail', size: 'small' %}</span>
              <input type="email" value="" name="customer[email]" id="email" class="large" size="30" />
            </div>
          </div>

          <div class="input-row">
            <label for="password" class="login">{{ 'customer.register.password' | t }}</label>
            <div class="text-over-input">
              <span class="input-icon-left">{% render 'icon', icon: 'lock', size: 'small' %}</span>
              <input type="password" value="" name="customer[password]" id="password" class="large password" size="30" />
              <button type="button" class="password-toggle" data-target="password" aria-pressed="true" aria-label="Show password">{% render 'icon', icon: 'eye', size: 'small' %}</button>
            </div>
          </div>

          {%- render 'consent-module', show_marketing_consent: section.settings.show_marketing_consent -%}

          <div class="lightly-spaced-row-above">
            <button class="btn" type="submit">{{ 'customer.register.submit' | t }}</button>
            <span class="note">
              {{ 'customer.register.have_account' | t }}
              <a href="{{ routes.account_login_url }}" class="underline">{{ 'customer.register.log_in' | t }}</a>
            </span>
          </div>
        {% endform %}
        </div>
      </div><!-- /#create-customer -->
    </div>
  </div>
</div>

<style>
#shopify-section-{{ section.id }} .page-header .title { margin-bottom: 8px; }
#shopify-section-{{ section.id }} .page-header .note { color: rgb(var(--text-2)); }
#shopify-section-{{ section.id }} .auth-card { max-width: 520px; margin: 0 auto; padding: 24px; border: 1px solid rgba(0,0,0,0.06); border-radius: 12px; box-shadow: 0 6px 18px rgba(0,0,0,0.06); background: rgb(var(--body-bg-color)); }
#shopify-section-{{ section.id }} .auth-card .input-row { margin-bottom: 14px; }
#shopify-section-{{ section.id }} .auth-card .input-row label.login { font-weight: 600; }
#shopify-section-{{ section.id }} .auth-card .input-row label[for="legal_consent"],
#shopify-section-{{ section.id }} .auth-card .input-row label[for="accepts_marketing"] { font-weight: 400; font-size: 14px; line-height: 1.6; }
#shopify-section-{{ section.id }} .auth-card input.large { width: 100%; border: 1px solid #e5e7eb; border-radius: 8px; padding: 10px 12px; transition: border-color .2s ease, box-shadow .2s ease; }
#shopify-section-{{ section.id }} .auth-card input.large:focus { outline: 0; border-color: rgb(var(--link-color)); box-shadow: 0 0 0 4px rgba(var(--link-color) / 0.18); }
#shopify-section-{{ section.id }} .auth-card .btn { width: 100%; }
#shopify-section-{{ section.id }} .auth-card .input-with-icon { position: relative; }
#shopify-section-{{ section.id }} .auth-card .input-with-icon input.large { padding-left: 42px; }
#shopify-section-{{ section.id }} .auth-card .input-icon-left { position: absolute; top: 50%; left: 14px; transform: translateY(-50%); color: #6b7280; }
#shopify-section-{{ section.id }} .input-icon-left .icon, #shopify-section-{{ section.id }} .input-icon-left .icon * { fill: currentColor !important; stroke: none !important; }
#shopify-section-{{ section.id }} .auth-card input.password { padding-right: 42px; }
#shopify-section-{{ section.id }} .auth-card .password-toggle { position: absolute; top: 50%; right: 14px; transform: translateY(-50%); width: 28px; height: 28px; display: inline-flex; align-items: center; justify-content: center; color: #6b7280; }
#shopify-section-{{ section.id }} .auth-card .password-toggle[aria-pressed="true"]::after { content: ""; position: absolute; width: 20px; border-top: 2px solid currentColor; transform: rotate(-45deg); }
#shopify-section-{{ section.id }} .text-over-input input.large { padding-left: 42px; }
#shopify-section-{{ section.id }} .auth-card label.login { display: inline; white-space: normal; }
#shopify-section-{{ section.id }} .auth-card label.login input[type="checkbox"] { margin-right: 8px; margin-top: 2px; }
#shopify-section-{{ section.id }} .auth-card .note a.underline { text-underline-offset: 2px; text-decoration-thickness: 1px; }
@media (max-width: 767.98px) { #shopify-section-{{ section.id }} .auth-card { padding: 18px; border-radius: 10px; } }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    var passwd = document.getElementById('password');
    var toggle = passwd ? passwd.parentNode.querySelector('.password-toggle[data-target="password"]') : null;
    if (passwd && toggle) {
      toggle.addEventListener('click', function(){
        var visible = passwd.type === 'text';
        passwd.type = visible ? 'password' : 'text';
        toggle.setAttribute('aria-pressed', passwd.type === 'password' ? 'true' : 'false');
      });
    }
  });
</script>

{% schema %}
{
  "name": "Customer register",
  "settings": [
    {
      "type": "checkbox",
      "id": "show_marketing_consent",
      "label": "Show marketing consent",
      "default": false
    }
  ]
}
{% endschema %}
