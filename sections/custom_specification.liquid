{%- comment -%}
/**
 * Custom Specification Sheet Section - Multi-language Product Specification Display Component
 * 
 * CORE FUNCTIONALITY:
 * This section creates a comprehensive product specification display with organized categories
 * and multi-language support. It renders product technical specifications in a structured
 * layout with categorized modules for different bike components and features.
 * 
 * KEY FEATURES:
 * - Multi-language specification display (English, German, French, Finnish)
 * - Modular specification categories (E-bike System, Frame, Suspension, etc.)
 * - Dynamic content rendering based on product metafields
 * - Custom accessories specifications with flexible field mapping
 * - Responsive design with mobile-optimized layout
 * - Automatic content detection and conditional rendering
 * 
 * SPECIFICATION CATEGORIES:
 * - E-Bike System: Motor, battery, display components
 * - Frame: Frame specifications and materials
 * - Suspension: Fork and shock absorber details
 * - Shifting: Derailleur, shifters, sprocket, cassette information
 * - Brakes: Brake systems, discs, and levers
 * - Wheels: Tires, rims, and hub specifications
 * - Steering & Seating: Handlebar, grips, stem, seat post, saddle
 * - Components: Lighting systems and carrier information
 * - Weight & Class: Weight specifications and bike category
 * - Accessories: Custom specification fields (1-10) for additional components
 * 
 * TECHNICAL IMPLEMENTATION:
 * - Uses Shopify product metafields for specification data storage
 * - Implements conditional rendering to show only populated specifications
 * - Utilizes CSS Grid and Flexbox for responsive layout
 * - Includes embedded CSS for component-specific styling
 * - Supports locale-based content switching
 * 
 * MULTI-LANGUAGE SUPPORT:
 * - English (default): Complete specification labels and categories
 * - German (de): Translated labels for German market
 * - French (fr): Translated labels for French market
 * - Finnish (fi): Translated labels for Finnish market
 * 
 * RESPONSIVE DESIGN:
 * - Desktop (769px+): Three-column grid layout with organized spacing
 * - Mobile (768px-): Single-column stacked layout with adjusted margins
 * - Flexible column system adapts to content availability
 * 
 * RELATED FILES:
 * 
 * Core Section File:
 * - sections/specifcation_sheet.liquid - This main section file
 * 
 * Asset Dependencies:
 * - assets/section-basestyles.css - Base styling for custom sections and components
 * 
 * Snippet Dependencies:
 * - snippets/spec-module.liquid - Modular specification rendering component with multi-language support
 * 
 * METAFIELD DEPENDENCIES:
 * The section relies on the following product metafields for content:
 * 
 * E-Bike System Fields:
 * - product.metafields.custom.motor2 - Motor specifications
 * - product.metafields.custom.battery - Battery information
 * - product.metafields.custom.display - Display system details
 * 
 * Frame & Suspension Fields:
 * - product.metafields.custom.frame - Frame specifications
 * - product.metafields.custom.fork - Fork details
 * - product.metafields.custom.shock - Shock absorber information
 * 
 * Drivetrain Fields:
 * - product.metafields.custom.derailleur - Derailleur specifications
 * - product.metafields.custom.shifters - Shifter information
 * - product.metafields.custom.sprocket - Sprocket details
 * - product.metafields.custom.cassette - Cassette specifications
 * 
 * Brake System Fields:
 * - product.metafields.custom.brake_f_r - Front/rear brake information
 * - product.metafields.custom.brake_disc_f_r - Brake disc specifications
 * - product.metafields.custom.brake_levers - Brake lever details
 * 
 * Wheel System Fields:
 * - product.metafields.custom.tires - Tire specifications
 * - product.metafields.custom.rims - Rim information
 * - product.metafields.custom.hub_front_f_r - Hub specifications
 * 
 * Control & Comfort Fields:
 * - product.metafields.custom.handlebar - Handlebar specifications
 * - product.metafields.custom.grips - Grip information
 * - product.metafields.custom.stem - Stem details
 * - product.metafields.custom.seat_post - Seat post specifications
 * - product.metafields.custom.saddle - Saddle information
 * 
 * Component Fields:
 * - product.metafields.custom.front_light - Front lighting system
 * - product.metafields.custom.rear_light - Rear lighting system
 * - product.metafields.custom.carrier - Carrier specifications
 * 
 * Weight & Classification Fields:
 * - product.metafields.custom.perm_total_weight - Permitted total weight
 * - product.metafields.custom.bike_weight - Bike weight
 * - product.metafields.custom.category - Bike category/class
 * 
 * Custom Accessories Fields (Dynamic 1-10):
 * - product.metafields.custom.specification_name_1 to specification_name_10 - Custom specification names
 * - product.metafields.custom.specification_value_1 to specification_value_10 - Custom specification values
 * 
 * PERFORMANCE CONSIDERATIONS:
 * - Conditional rendering prevents empty specification modules from displaying
 * - Efficient metafield access with minimal Liquid processing
 * - Embedded CSS reduces external file dependencies
 * - Mobile-first responsive design approach
 * 
 * BROWSER COMPATIBILITY:
 * - Modern browsers with CSS Grid and Flexbox support
 * - Progressive enhancement for older browsers
 * - Touch-friendly interface for mobile devices
 * 
 * CUSTOMIZATION OPTIONS:
 * - Easy addition of new specification categories via spec-module snippet
 * - Flexible metafield mapping for custom product types
 * - Styling customization through embedded CSS or external stylesheets
 * - Language expansion through case statement modification
 * 
 * USAGE SCENARIOS:
 * - Product detail pages requiring comprehensive technical specifications
 * - E-bike and bicycle product catalogs
 * - Technical documentation and comparison features
 * - Multi-market product presentations with localized content
 */
{%- endcomment -%}

{% schema %}
{
  "name": "Custom Specification",
  "settings": [],
  "presets": [
    {
      "name": "Custom Specification",
      "category": "Custom"
    }
  ]
}
{% endschema %}

{{ 'section-basestyles.css' | asset_url | stylesheet_tag }}

{% assign lang = request.locale.iso_code %}
<div id="custom-specification-sheet">
  <div class="container">
    <h2 class="section-title" id="specification">
      {% case lang %}
        {% when 'de' -%}
          Spezifikation
        {% when 'fr' -%}
          Sp√©cifications
        {% when 'fi' -%}
          Tekniset tiedot
        {% else -%}
          Specification
      {% endcase %}
    </h2>

    <div class="specification-sheet-list" id="specification-sheet-list">

      <!-- E-Bike System -->
      {% render 'spec-module',
        fields: 'motor2,battery,display',
        labels: 'motor,battery,display',
        title: 'e-bike-system',
        lang: lang
      %}

      <!-- Frame -->
      {% render 'spec-module',
        fields: 'frame',
        labels: 'frame',
        title: 'frame',
        lang: lang
      %}

      <!-- Suspension -->
      {% render 'spec-module', fields: 'fork,shock', labels: 'fork,shock', title: 'suspension', lang: lang %}

      <!-- Shifting -->
      {% render 'spec-module',
        fields: 'derailleur,shifters,cassette,chain_ring',
        labels: 'derailleur,shifters,cassette,chain_ring',
        title: 'shifting',
        lang: lang
      %}

      <!-- Brakes -->
      {% render 'spec-module',
        fields: 'brake_f_r,brake_disc_f_r,brake_levers',
        labels: 'brake_f_r,brake_disc_f_r,brake_levers',
        title: 'brakes',
        lang: lang
      %}

      <!-- Wheels -->
      {% render 'spec-module',
        fields: 'tires,rims,hub_front_f_r',
        labels: 'tires,rims,hub_front_f_r',
        title: 'wheels',
        lang: lang
      %}

      <!-- Steering & Seating -->
      {% render 'spec-module',
        fields: 'handlebar,grips,stem,seat_post,saddle',
        labels: 'handlebar,grips,stem,seat_post,saddle',
        title: 'steering_seating',
        lang: lang
      %}

      <!-- Components -->
      {% render 'spec-module',
        fields: 'front_light,rear_light,carrier',
        labels: 'front_light,rear_light,carrier',
        title: 'components',
        lang: lang
      %}

      <!-- Weight & Class -->
      {% render 'spec-module',
        fields: 'perm_total_weight,bike_weight,category',
        labels: 'perm_total_weight,bike_weight,category',
        title: 'weight_class',
        lang: lang
      %}
      
      <!-- Accessories Specifications -->
      <div class="specification-module accessories-specs">
        <div class="specification-row">
          {% for i in (1..10) %} 
            {% capture name_key %}specification_name_{{ i }}{% endcapture %} 
            {% capture value_key %}specification_value_{{ i }}{% endcapture %} 
            {% assign name = product.metafields.custom[name_key] %} 
            {% assign value = product.metafields.custom[value_key] %} 
            {% if name.value != blank or value.value != blank %}
              <div class="column">
                <div class="label-column">
                  <strong>{{ name.value }}</strong>
                </div>
                <div class="value-column">{{ value.value }}</div>
              </div>
            {% endif %} 
          {% endfor %}
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  #custom-specification-sheet {
    margin: 80px 0;
  }

  #custom-specification-sheet .specification-sheet-list {
    display: flex;
    flex-direction: column;
  }

  #custom-specification-sheet .specification-module {
    margin-bottom: 20px;
  }

  #custom-specification-sheet .specification-row {
    display: flex;
    justify-content: flex-start;
    padding: 5px 0;
    flex-wrap: wrap;
    margin: 0 6px; 
  }

  #custom-specification-sheet .column {
    flex: 0 0 calc(33.33% - 10px);
    margin: 0 5px 10px;
    box-sizing: border-box;
  }

  #custom-specification-sheet .label-column {
    font-size: 18px;
    margin-bottom: 5px;
    flex: 0.5;
    padding-left: 10px; 
  }

  #custom-specification-sheet .value-column {
    font-size: 16px;
    padding-left: 10px; 
  }

  #custom-specification-sheet .specification-header {
    width: 100%;
    background-color: #f0f0f0;
    padding: 10px;
    margin: 10px 0;
  }

  #custom-specification-sheet .specification-header h5 {
    margin: 0;
    text-align: left;
    padding-left: 10px; 
  }
  
  #custom-specification-sheet .info-container {
    margin-top: 40px;
  }
  
  #custom-specification-sheet #specification-table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
  }
  
  #custom-specification-sheet #specification-table th,
  #custom-specification-sheet #specification-table td {
    padding: 10px;
    text-align: left;
    border-bottom: 1px solid #ddd;
  }
  
  #custom-specification-sheet #specification-table th {
    width: 30%;
    font-weight: 600;
  }

  @media (max-width: 768px) {
    #custom-specification-sheet {
      margin: 50px 0; 
    }
    
    #custom-specification-sheet .specification-row {
      flex-direction: column;
      margin: 0 10px; 
    }
    
    #custom-specification-sheet .column {
      flex: 0 0 100%;
      margin: 0 0 10px;
    }
    
    #custom-specification-sheet #specification-table th,
    #custom-specification-sheet #specification-table td {
      padding: 8px;
    }
    
    #custom-specification-sheet #specification-table th {
      width: 40%;
    }
  }
  
  /* Accessories Specifications specific styles */
  #custom-specification-sheet .accessories-specs .specification-row {
    margin: 0;
  }
  
  #custom-specification-sheet .accessories-specs .label-column,
  #custom-specification-sheet .accessories-specs .value-column {
    padding-left: 0px;
  }
  
  @media (max-width: 768px) {
    #custom-specification-sheet .accessories-specs .specification-row {
      margin: 0;
    }
  }
</style>