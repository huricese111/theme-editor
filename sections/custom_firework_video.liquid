{% comment %}
  ============================================================================
  Custom Firework Video Playlist Section
  ============================================================================

  DESCRIPTION:
  A comprehensive Shopify section for integrating Firework video playlists
  with multiple display modes and responsive design. This component enables
  merchants to showcase video content in various formats to enhance user
  engagement and product demonstrations across the Hepha e-bike website.

  CORE FEATURES:
  • Multiple Display Modes: Story Block, Floating Player, Grid, Carousel, Hero Unit
  • Dynamic Playlist Integration: Via Firework CDN with real-time content updates
  • Responsive Design: Adaptive styling for all device types and screen sizes
  • Autoplay Functionality: Enhanced user experience with automatic video playback
  • Customizable Player Placement: Flexible positioning and video limit controls
  • Seamless Firework Integration: Native embed system compatibility
  • Channel Branding: Configured for 'hepha' brand consistency
  • Smooth Transitions: CSS-based animations for mode switching

  DISPLAY MODES:
  1. Story Block (default): Standard story-style video presentation
  2. Floating Player (pinned): Minimized floating video player with zero padding
  3. Grid: Grid layout for multiple video thumbnails with embed-feed
  4. Carousel (row): Horizontal scrolling video carousel with embed-feed
  5. Hero Unit: Large featured video display with herounit component

  CONFIGURATION OPTIONS:
  • Playlist ID: Firework playlist identifier for content source
  • Mode Selection: Choose from 5 different display formats
  • Channel: Set to 'hepha' for brand consistency
  • Autoplay: Enabled by default for enhanced engagement
  • Player Placement: Bottom-right positioning for grid and carousel modes
  • Max Videos: Unlimited (set to 0) for comprehensive content display

  TECHNICAL IMPLEMENTATION:
  • Conditional Liquid Logic: Mode-specific rendering with if/elsif statements
  • Custom CSS Styling: Inline styles for videoblock container and transitions
  • External Script Loading: Asynchronous loading of Firework CDN scripts
  • Web Components: Uses fw-storyblock, fw-embed-feed, and fw-herounit elements
  • Responsive Container: .videoblock class with adaptive padding and transitions

  DEPENDENCIES AND RELATED FILES:

  External CDN Scripts:
  • //asset.fwcdn3.com/js/storyblock.js - Story block and pinned mode functionality
  • //asset.fwcdn3.com/js/embed-feed.js - Grid and carousel mode functionality
  • //asset.fwcdn3.com/js/fwn.js - Hero unit mode functionality

  CUSTOM CSS OVERRIDES:
  Many template implementations include custom CSS:
  • .videoblock {padding: 0;} - Removes default padding for specific layouts

  SCHEMA CONFIGURATION:
  • Section Name: "Custom Playlist"
  • Category: "Custom"
  • Settings: Mode selector (5 options) and Playlist ID text input
  • Default Mode: "row" (Carousel)
  • Preset: Available in Shopify theme customizer

  BROWSER SUPPORT:
  • Modern browsers with Custom Elements API support
  • Asynchronous script loading compatibility
  • CSS transitions and transform support
  • Responsive design with mobile optimization

  PERFORMANCE CONSIDERATIONS:
  • Asynchronous script loading prevents render blocking
  • Conditional script loading based on selected mode
  • CSS transitions for smooth user experience
  • Optimized for mobile and desktop performance

  ACCESSIBILITY FEATURES:
  • Semantic HTML structure with proper video elements
  • Keyboard navigation support through Firework components
  • Screen reader compatibility via native video controls
  • Responsive design for various accessibility needs

  USAGE EXAMPLES:
  • Homepage hero video (pinned mode)
  • Product demonstration galleries (grid/carousel modes)
  • Promotional campaign videos (story block mode)
  • Featured content showcases (hero unit mode)

  ============================================================================
{% endcomment %}

{% schema %}
{
  "name": "Custom Playlist",
  "settings": [
    {
      "type": "select",
      "id": "mode",
      "label": "Select Mode",
      "options": [
        {
          "value": "default",
          "label": "Story Block"
        },
        {
          "value": "pinned",
          "label": "Floating Player"
        },
        {
          "value": "grid",
          "label": "Grid"
        },
        {
          "value": "row",
          "label": "Carousel"
        },
        {
          "value": "hero",
          "label": "Hero Unit"
        }
      ],
      "default": "row"
    },
    {
      "type": "text",
      "id": "playlist_id",
      "label": "Playlist ID",
      "info": "Enter the Firework playlist ID"
    },
    {
      "type": "select",
      "id": "player_placement",
      "label": "Player Placement",
      "options": [
        {
          "value": "bottom-left",
          "label": "Bottom Left"
        },
        {
          "value": "bottom-right",
          "label": "Bottom Right"
        },
        {
          "value": "top-left",
          "label": "Top Left"
        },
        {
          "value": "top-right",
          "label": "Top Right"
        }
      ],
      "default": "bottom-left",
      "info": "Choose the position for the player"
    },
    {
      "type": "number",
      "id": "player_margin_top",
      "label": "Player Margin Top",
      "default": 16,
      "info": "Top margin in pixels"
    },
    {
      "type": "number",
      "id": "player_margin_right",
      "label": "Player Margin Right",
      "default": 16,
      "info": "Right margin in pixels"
    },
    {
      "type": "number",
      "id": "player_margin_bottom",
      "label": "Player Margin Bottom",
      "default": 140,
      "info": "Bottom margin in pixels"
    },
    {
      "type": "number",
      "id": "player_margin_left",
      "label": "Player Margin Left",
      "default": 16,
      "info": "Left margin in pixels"
    },
    {
      "type": "number",
      "id": "player_width",
      "label": "Player Width",
      "default": 125,
      "info": "Player width in pixels"
    },
    {
      "type": "number",
      "id": "player_height",
      "label": "Player Height",
      "default": 223,
      "info": "Player height in pixels"
    }
  ],
  "presets": [
    {
      "name": "Custom Playlist",
      "category": "Custom"
    }
  ]
}
{% endschema %}

{% assign playlist_id = section.settings.playlist_id %}
{% assign mode = section.settings.mode %}
{% assign player_placement = section.settings.player_placement %}
{% assign player_margin_top = section.settings.player_margin_top %}
{% assign player_margin_right = section.settings.player_margin_right %}
{% assign player_margin_bottom = section.settings.player_margin_bottom %}
{% assign player_margin_left = section.settings.player_margin_left %}
{% assign player_width = section.settings.player_width %}
{% assign player_height = section.settings.player_height %}

<style>
  :root {
    --fw-player-margin: {{ player_margin_top | default: 16 }}px {{ player_margin_right | default: 16 }}px {{ player_margin_bottom | default: 140 }}px {{ player_margin_left | default: 16 }}px;
    --fw-player-width: {{ player_width | default: 125 }}px;
    --fw-player-height: {{ player_height | default: 223 }}px;
  }

  .videoblock {
    padding: 100px 60px;
    transition: height 0.3s ease, padding 0.3s ease;
  }

  .mode-pinned {
    height: 0;
    padding: 0;
    overflow: hidden;
  }
</style>

<div class="videoblock {% if mode == 'pinned' %}mode-pinned{% endif %}">
  <script async src="//asset.fwcdn3.com/js/storyblock.js"></script>

  {% if mode == 'default' %}
    <fw-storyblock
      channel="hepha"
      playlist="{{ playlist_id }}"
      autoplay="true"
    >
    </fw-storyblock>

  {% elsif mode == 'pinned' %}
    <fw-storyblock
      channel="hepha"
      playlist="{{ playlist_id }}"
      mode="pinned"
      autoplay="true"
      player_placement="{{ player_placement }}"
    ></fw-storyblock>

  {% elsif mode == 'grid' %}
    <script async type="text/javascript" src="//asset.fwcdn3.com/js/embed-feed.js"></script>
    <fw-embed-feed
      channel="hepha"
      playlist="{{ playlist_id }}"
      mode="grid"
      open_in="default"
      max_videos="0"
      placement="middle"
      player_placement="{{ player_placement }}"
    >
    </fw-embed-feed>

  {% elsif mode == 'row' %}
    <script async type="text/javascript" src="//asset.fwcdn3.com/js/embed-feed.js"></script>
    <fw-embed-feed
      channel="hepha"
      playlist="{{ playlist_id }}"
      mode="row"
      open_in="default"
      max_videos="0"
      placement="middle"
      player_placement="{{ player_placement }}"
    >
    </fw-embed-feed>

  {% elsif mode == 'hero' %}
    <script async src="//asset.fwcdn3.com/js/fwn.js"></script>
    <fw-herounit
      channel="hepha"
      playlist="{{ playlist_id }}"
    >
    </fw-herounit>
  {% endif %}
</div>
